"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{30482:function(e,t,n){n.d(t,{z:function(){return u}});var a=n(2265),r=n(28223),s=n(6481);let i=[{period:"Jan 2024",newSubscriptions:25,renewedSubscriptions:18,cancelledSubscriptions:5,revenue:12500,averageLifetime:8.5,topTiers:[{tier:s.QV.PROFESSIONAL,count:15,revenue:7500,percentage:60},{tier:s.QV.BASIC,count:8,revenue:3200,percentage:32},{tier:s.QV.ENTERPRISE,count:2,revenue:1800,percentage:8}]},{period:"Feb 2024",newSubscriptions:30,renewedSubscriptions:22,cancelledSubscriptions:3,revenue:15800,averageLifetime:9.2,topTiers:[{tier:s.QV.PROFESSIONAL,count:20,revenue:1e4,percentage:63},{tier:s.QV.BASIC,count:9,revenue:3600,percentage:29},{tier:s.QV.ENTERPRISE,count:3,revenue:2200,percentage:8}]},{period:"Mar 2024",newSubscriptions:35,renewedSubscriptions:28,cancelledSubscriptions:8,revenue:19200,averageLifetime:8.8,topTiers:[{tier:s.QV.PROFESSIONAL,count:22,revenue:11e3,percentage:59},{tier:s.QV.BASIC,count:11,revenue:4400,percentage:30},{tier:s.QV.ENTERPRISE,count:4,revenue:3800,percentage:11}]}],c={totalDevices:1247,activeDevices:1089,devicesByPlatform:[{platform:"Windows",count:589,percentage:47.2},{platform:"macOS",count:312,percentage:25},{platform:"Linux",count:203,percentage:16.3},{platform:"iOS",count:98,percentage:7.9},{platform:"Android",count:45,percentage:3.6}],devicesByRegion:[{region:"North America",count:456,percentage:36.6},{region:"Europe",count:398,percentage:31.9},{region:"Asia Pacific",count:289,percentage:23.2},{region:"Latin America",count:67,percentage:5.4},{region:"Middle East & Africa",count:37,percentage:2.9}],averageDevicesPerSubscription:2.8},o=[{period:"2024-01",revenue:45e3,count:150},{period:"2024-02",revenue:52e3,count:175},{period:"2024-03",revenue:58500,count:195},{period:"2024-04",revenue:65e3,count:220},{period:"2024-05",revenue:72e3,count:245},{period:"2024-06",revenue:78e3,count:268}];class l{async getDashboardAnalytics(){return r.x.get("".concat(this.baseUrl,"/dashboard"))}async getSubscriptionAnalytics(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],new Promise(e=>{setTimeout(()=>{e({success:!0,data:i,message:"Mock subscription analytics data"})},500)})}async getDeviceAnalytics(e,t){return new Promise(e=>{setTimeout(()=>{e({success:!0,data:c,message:"Mock device analytics data"})},500)})}async getRevenueAnalytics(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],new Promise(e=>{setTimeout(()=>{e({success:!0,data:o,message:"Mock revenue analytics data"})},500)})}async getChurnAnalysis(e,t){let n=new URLSearchParams;e&&n.append("start_date",e.toISOString()),t&&n.append("end_date",t.toISOString());let a="".concat(this.baseUrl,"/churn?").concat(n.toString());return r.x.get(a)}async getRetentionAnalysis(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"monthly",t=new URLSearchParams;t.append("cohort_type",e);let n="".concat(this.baseUrl,"/retention?").concat(t.toString());return r.x.get(n)}async getGeographicDistribution(){return r.x.get("".concat(this.baseUrl,"/geographic"))}async getTierPerformance(e,t){let n=new URLSearchParams;e&&n.append("start_date",e.toISOString()),t&&n.append("end_date",t.toISOString());let a="".concat(this.baseUrl,"/tiers?").concat(n.toString());return r.x.get(a)}async getFeatureUsage(e,t,n){let a=new URLSearchParams;e&&a.append("subscription_id",e),t&&a.append("start_date",t.toISOString()),n&&a.append("end_date",n.toISOString());let s="".concat(this.baseUrl,"/features?").concat(a.toString());return r.x.get(s)}async getSystemHealth(){return r.x.get("".concat(this.baseUrl,"/system-health"))}async getActivationTrends(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",a=new URLSearchParams;e&&a.append("start_date",e.toISOString()),t&&a.append("end_date",t.toISOString()),a.append("group_by",n);let s="".concat(this.baseUrl,"/activations?").concat(a.toString());return r.x.get(s)}async getTopCustomers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"revenue",n=new URLSearchParams;n.append("limit",e.toString()),n.append("metric",t);let a="".concat(this.baseUrl,"/top-customers?").concat(n.toString());return r.x.get(a)}async generateReport(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pdf",s=new URLSearchParams;s.append("report_type",e),s.append("start_date",t.toISOString()),s.append("end_date",n.toISOString()),s.append("format",a);let i="".concat(this.baseUrl,"/reports?").concat(s.toString()),c="".concat(e,"_report_").concat(t.toISOString().split("T")[0],"_to_").concat(n.toISOString().split("T")[0],".").concat(a);await r.x.downloadFile(i,c)}async getRealTimeMetrics(){return r.x.get("".concat(this.baseUrl,"/realtime"))}async getUsagePatterns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"daily",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=new URLSearchParams;a.append("timeframe",e),t&&a.append("start_date",t.toISOString()),n&&a.append("end_date",n.toISOString());let s="".concat(this.baseUrl,"/usage-patterns?").concat(a.toString());return r.x.get(s)}async getForecasting(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=new URLSearchParams;n.append("metric",e),n.append("periods",t.toString());let a="".concat(this.baseUrl,"/forecast?").concat(n.toString());return r.x.get(a)}constructor(){this.baseUrl="/api/v1/analytics"}}new l;let u=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5,n=(0,a.useRef)(new l).current,r=(0,a.useRef)(null),s=(0,a.useRef)(null),[i,c]=(0,a.useState)({dashboardData:null,subscriptionAnalytics:[],deviceAnalytics:null,revenueData:[],churnData:null,retentionData:[],geographicData:[],tierPerformance:[],featureUsage:[],systemHealth:null,activationTrends:[],topCustomers:[],realTimeMetrics:null,usagePatterns:[],forecasting:[],isLoadingDashboard:!1,isLoadingSubscriptions:!1,isLoadingDevices:!1,isLoadingRevenue:!1,isLoadingChurn:!1,isLoadingRetention:!1,isLoadingGeographic:!1,isLoadingTiers:!1,isLoadingFeatures:!1,isLoadingHealth:!1,isLoadingActivations:!1,isLoadingCustomers:!1,isLoadingRealTime:!1,isLoadingPatterns:!1,isLoadingForecasting:!1,error:null,lastFetched:{}}),o=(0,a.useCallback)(async(e,t,n,a)=>{c(e=>({...e,[t]:!0,error:null}));try{let r=await e();if(r.success&&void 0!==r.data)return c(e=>({...e,[n]:r.data,[t]:!1,lastFetched:{...e.lastFetched,[a]:new Date},error:null})),{success:!0};{let e=r.error||"Failed to fetch ".concat(a);return c(n=>({...n,[t]:!1,error:e})),{success:!1,error:e}}}catch(n){let e=n instanceof Error?n.message:"Failed to fetch ".concat(a);return c(n=>({...n,[t]:!1,error:e})),{success:!1,error:e}}},[]),u=(0,a.useCallback)(async()=>o(()=>n.getDashboardAnalytics(),"isLoadingDashboard","dashboardData","dashboard"),[n,o]),g=(0,a.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day";return o(()=>n.getSubscriptionAnalytics(e,t,a),"isLoadingSubscriptions","subscriptionAnalytics","subscriptions")},[n,o]),d=(0,a.useCallback)(async(e,t)=>o(()=>n.getDeviceAnalytics(e,t),"isLoadingDevices","deviceAnalytics","devices"),[n,o]),p=(0,a.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"month";return o(()=>n.getRevenueAnalytics(e,t,a),"isLoadingRevenue","revenueData","revenue")},[n,o]),h=(0,a.useCallback)(async(e,t)=>o(()=>n.getChurnAnalysis(e,t),"isLoadingChurn","churnData","churn"),[n,o]),v=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"monthly";return o(()=>n.getRetentionAnalysis(e),"isLoadingRetention","retentionData","retention")},[n,o]),S=(0,a.useCallback)(async()=>o(()=>n.getGeographicDistribution(),"isLoadingGeographic","geographicData","geographic"),[n,o]),y=(0,a.useCallback)(async(e,t)=>o(()=>n.getTierPerformance(e,t),"isLoadingTiers","tierPerformance","tiers"),[n,o]),b=(0,a.useCallback)(async(e,t,a)=>o(()=>n.getFeatureUsage(e,t,a),"isLoadingFeatures","featureUsage","features"),[n,o]),m=(0,a.useCallback)(async()=>o(()=>n.getSystemHealth(),"isLoadingHealth","systemHealth","health"),[n,o]),f=(0,a.useCallback)(async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day";return o(()=>n.getActivationTrends(e,t,a),"isLoadingActivations","activationTrends","activations")},[n,o]),L=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"revenue";return o(()=>n.getTopCustomers(e,t),"isLoadingCustomers","topCustomers","customers")},[n,o]),C=(0,a.useCallback)(async()=>o(()=>n.getRealTimeMetrics(),"isLoadingRealTime","realTimeMetrics","realtime"),[n,o]),R=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;P(),r.current=setInterval(()=>{C()},e),C()},[C]),P=(0,a.useCallback)(()=>{r.current&&(clearInterval(r.current),r.current=null)},[]),A=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"daily",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return o(()=>n.getUsagePatterns(e,t,a),"isLoadingPatterns","usagePatterns","patterns")},[n,o]),w=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"subscriptions",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return o(()=>n.getForecasting(e,t),"isLoadingForecasting","forecasting","forecasting")},[n,o]),k=(0,a.useCallback)(async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pdf";try{return await n.generateReport(e,t,a,r),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to generate report"}}},[n]),T=(0,a.useCallback)(async()=>{let e=[u(),g(),d(),p(),m(),L()];try{return await Promise.all(e),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to refresh all data"}}},[u,g,d,p,m,L]),U=(0,a.useCallback)(()=>{c(e=>({...e,error:null}))},[]),I=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=i.lastFetched[e];return!n||(new Date().getTime()-n.getTime())/6e4>t},[i.lastFetched]);return(0,a.useEffect)(()=>{if(e)return s.current=setInterval(()=>{T()},t),()=>{s.current&&clearInterval(s.current)}},[e,t,T]),(0,a.useEffect)(()=>()=>{P(),s.current&&clearInterval(s.current)},[P]),(0,a.useEffect)(()=>{u(),m()},[u,m]),{...i,refreshDashboard:u,fetchSubscriptionAnalytics:g,fetchDeviceAnalytics:d,fetchRevenueAnalytics:p,fetchChurnAnalysis:h,fetchRetentionAnalysis:v,fetchGeographicDistribution:S,fetchTierPerformance:y,fetchFeatureUsage:b,fetchSystemHealth:m,fetchActivationTrends:f,fetchTopCustomers:L,fetchRealTimeMetrics:C,startRealTimeUpdates:R,stopRealTimeUpdates:P,fetchUsagePatterns:A,fetchForecasting:w,generateReport:k,refreshAll:T,clearError:U,isDataStale:I}}}}]);