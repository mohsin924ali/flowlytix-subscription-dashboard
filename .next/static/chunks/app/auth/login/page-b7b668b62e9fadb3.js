(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{14763:function(e,t,r){Promise.resolve().then(r.bind(r,26490))},26490:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(57437),a=r(2265),i=r(99376),s=r(1899),o=r(67208),l=r(5002),d=r(36137),c=r(15735),u=r(97404),h=r(23996),m=r(59832),x=r(94013),g=r(35389),f=r(8350),p=r(97312),j=r(67696),b=r(91360),v=r(66067),w=r(14759),Z=r(94395),y=(0,r(94630).Z)((0,n.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),S=r(27648),A=r(73310);function k(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),{login:r,loading:k,error:I}=(0,A.aC)(),[E,_]=(0,a.useState)({email:"",password:""}),[C,P]=(0,a.useState)(!1),[z,W]=(0,a.useState)({}),[D,L]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=t.get("message");e&&L(e)},[t]);let N=()=>{let e={};return E.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)||(e.email="Please enter a valid email address"):e.email="Email is required",E.password||(e.password="Password is required"),W(e),0===Object.keys(e).length},O=async t=>{if(t.preventDefault(),N())try{await r(E.email,E.password),e.push("/")}catch(e){console.error("Login failed:",e)}},H=e=>t=>{_(r=>({...r,[e]:t.target.value})),z[e]&&W(t=>({...t,[e]:""}))};return(0,n.jsx)(s.Z,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",p:2},children:(0,n.jsxs)(o.Z,{elevation:24,sx:{maxWidth:450,width:"100%",borderRadius:3,overflow:"hidden"},children:[(0,n.jsxs)(s.Z,{sx:{background:"linear-gradient(135deg, #513ff2 0%, #6b52f5 100%)",color:"white",p:4,textAlign:"center"},children:[(0,n.jsx)(j.Z,{sx:{fontSize:48,mb:2}}),(0,n.jsx)(l.Z,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Subscription Dashboard"}),(0,n.jsx)(l.Z,{variant:"subtitle1",sx:{opacity:.9},children:"Admin Portal Login"})]}),(0,n.jsxs)(d.Z,{sx:{p:4},children:[D&&(0,n.jsx)(c.Z,{severity:"success",sx:{mb:3},children:D}),I&&(0,n.jsx)(c.Z,{severity:"error",sx:{mb:3},children:I}),(0,n.jsxs)("form",{onSubmit:O,children:[(0,n.jsx)(u.Z,{fullWidth:!0,label:"Email Address",type:"email",value:E.email,onChange:H("email"),error:!!z.email,helperText:z.email,disabled:k,margin:"normal",InputProps:{startAdornment:(0,n.jsx)(h.Z,{position:"start",children:(0,n.jsx)(b.Z,{color:"action"})})},sx:{mb:2}}),(0,n.jsx)(u.Z,{fullWidth:!0,label:"Password",type:C?"text":"password",value:E.password,onChange:H("password"),error:!!z.password,helperText:z.password,disabled:k,margin:"normal",InputProps:{startAdornment:(0,n.jsx)(h.Z,{position:"start",children:(0,n.jsx)(v.Z,{color:"action"})}),endAdornment:(0,n.jsx)(h.Z,{position:"end",children:(0,n.jsx)(m.Z,{onClick:()=>P(!C),edge:"end",disabled:k,children:C?(0,n.jsx)(w.Z,{}):(0,n.jsx)(Z.Z,{})})})},sx:{mb:3}}),(0,n.jsx)(x.Z,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:k,startIcon:k?(0,n.jsx)(g.Z,{size:20}):(0,n.jsx)(y,{}),sx:{py:1.5,fontSize:"1.1rem",fontWeight:"bold",mb:3},children:k?"Signing In...":"Sign In"}),(0,n.jsx)(f.Z,{sx:{my:3}}),(0,n.jsx)(s.Z,{sx:{textAlign:"center"},children:(0,n.jsxs)(l.Z,{variant:"body2",color:"textSecondary",children:["Don't have an account?"," ",(0,n.jsx)(S.default,{href:"/auth/register",passHref:!0,children:(0,n.jsx)(p.Z,{component:"span",sx:{color:"primary.main",textDecoration:"none",fontWeight:600,"&:hover":{textDecoration:"underline"}},children:"Create Account"})})]})})]})]})]})})}},73310:function(e,t,r){"use strict";r.d(t,{Ho:function(){return o},aC:function(){return l}});var n=r(57437),a=r(2265);let i={user:null,token:null,isAuthenticated:!1,loading:!0,error:null},s=(0,a.createContext)({...i,login:async()=>{},logout:()=>{},clearError:()=>{}}),o=e=>{let{children:t}=e,[r,o]=(0,a.useState)(i);(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("auth_user");if(e&&t){let r=JSON.parse(t);o({user:r,token:e,isAuthenticated:!0,loading:!1,error:null})}else o({...i,loading:!1})}catch(e){console.error("Failed to initialize auth:",e),o({...i,loading:!1,error:"Failed to initialize authentication"})}})()},[]);let l=async(e,t)=>{o(e=>({...e,loading:!0,error:null}));try{if("admin@flowlytix.com"===e&&"admin"===t){let e={id:"1",email:"admin@flowlytix.com",name:"Admin User",role:"admin",permissions:["read","write","delete"],lastLoginAt:new Date},t="mock-jwt-token";localStorage.setItem("auth_token",t),localStorage.setItem("auth_user",JSON.stringify(e)),o({user:e,token:t,isAuthenticated:!0,loading:!1,error:null})}else throw Error("Invalid credentials")}catch(e){throw o({...i,loading:!1,error:e instanceof Error?e.message:"Login failed"}),e}},d={...r,login:l,logout:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),o({...i,loading:!1})},clearError:()=>{o(e=>({...e,error:null}))}};return(0,n.jsx)(s.Provider,{value:d,children:t})},l=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[355,152,160,425,735,404,202,971,117,744],function(){return e(e.s=14763)}),_N_E=e.O()}]);