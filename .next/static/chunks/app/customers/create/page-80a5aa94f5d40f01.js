(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[499],{47277:function(e,t,r){Promise.resolve().then(r.bind(r,92557))},45319:function(e,t,r){"use strict";var a=r(94630),i=r(57437);t.Z=(0,a.Z)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},44149:function(e,t,r){"use strict";var a=r(94630),i=r(57437);t.Z=(0,a.Z)((0,i.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business")},74853:function(e,t,r){"use strict";var a=r(94630),i=r(57437);t.Z=(0,a.Z)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},83722:function(e,t,r){"use strict";var a=r(94630),i=r(57437);t.Z=(0,a.Z)((0,i.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},8350:function(e,t,r){"use strict";var a=r(74610),i=r(1119),n=r(2265),s=r(61994),o=r(20801),l=r(14031),c=r(16210),d=r(37053),u=r(42596),h=r(57437);let m=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],p=e=>{let{absolute:t,children:r,classes:a,flexItem:i,light:n,orientation:s,textAlign:l,variant:c}=e;return(0,o.Z)({root:["root",t&&"absolute",c,n&&"light","vertical"===s&&"vertical",i&&"flexItem",r&&"withChildren",r&&"vertical"===s&&"withChildrenVertical","right"===l&&"vertical"!==s&&"textAlignRight","left"===l&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]},u.V,a)},v=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})(e=>{let{theme:t,ownerState:r}=e;return(0,i.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},r.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},r.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,l.Fq)(t.palette.divider,.08)},"inset"===r.variant&&{marginLeft:72},"middle"===r.variant&&"horizontal"===r.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===r.variant&&"vertical"===r.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===r.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},r.flexItem&&{alignSelf:"stretch",height:"auto"})},e=>{let{ownerState:t}=e;return(0,i.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})},e=>{let{theme:t,ownerState:r}=e;return(0,i.Z)({},r.children&&"vertical"!==r.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}})},e=>{let{theme:t,ownerState:r}=e;return(0,i.Z)({},r.children&&"vertical"===r.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}})},e=>{let{ownerState:t}=e;return(0,i.Z)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})}),x=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})(e=>{let{theme:t,ownerState:r}=e;return(0,i.Z)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===r.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})}),f=n.forwardRef(function(e,t){let r=(0,d.i)({props:e,name:"MuiDivider"}),{absolute:n=!1,children:o,className:l,component:c=o?"div":"hr",flexItem:u=!1,light:f=!1,orientation:g="horizontal",role:b="hr"!==c?"separator":void 0,textAlign:y="center",variant:Z="fullWidth"}=r,j=(0,a.Z)(r,m),w=(0,i.Z)({},r,{absolute:n,component:c,flexItem:u,light:f,orientation:g,role:b,textAlign:y,variant:Z}),C=p(w);return(0,h.jsx)(v,(0,i.Z)({as:c,className:(0,s.Z)(C.root,l),role:b,ref:t,ownerState:w},j,{children:o?(0,h.jsx)(x,{className:C.wrapper,ownerState:w,children:o}):null}))});f.muiSkipListHighlight=!0,t.Z=f},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}}),r.o(a,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return a.useServerInsertedHTML}})},92557:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var a=r(57437),i=r(2265),n=r(99376),s=r(1899),o=r(94013),l=r(5002),c=r(67208),d=r(36137),u=r(15735),h=r(89414),m=r(67571),p=r(8350),v=r(97404),x=r(35389),f=r(45319),g=r(83722),b=r(44149),y=r(74853),Z=(0,r(94630).Z)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),j=r(27648),w=r(28223);function C(){let e=(0,n.useRouter)(),[t,r]=(0,i.useState)({name:"",email:"",company:"",phone:"",address:"",customerType:"business",notes:""}),[C,S]=(0,i.useState)(!1),[T,P]=(0,i.useState)(null),[A,k]=(0,i.useState)(null),[z,L]=(0,i.useState)({}),H=()=>{let e={};return t.name.trim()||(e.name="Customer name is required"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(e.email="Please enter a valid email address"):e.email="Email is required","business"!==t.customerType||t.company.trim()||(e.company="Company name is required for business customers"),t.phone.trim()||(e.phone="Phone number is required"),L(e),0===Object.keys(e).length},I=async r=>{if(r.preventDefault(),H()){S(!0),P(null),k(null);try{let r=await w.x.post("/api/v1/subscription/customers",{name:t.name.trim(),email:t.email.trim().toLowerCase(),company:t.company.trim()||null,phone:t.phone.trim(),address:t.address.trim()||null,metadata:{customer_type:t.customerType,notes:t.notes.trim()||null,created_via:"dashboard",created_at:new Date().toISOString()}});r.success?(k("Customer created successfully!"),setTimeout(()=>{e.push("/customers")},2e3)):P(r.error||"Failed to create customer")}catch(e){console.error("Customer creation failed:",e),P(e instanceof Error?e.message:"An unexpected error occurred")}finally{S(!1)}}},R=e=>t=>{r(r=>({...r,[e]:t.target.value})),z[e]&&L(t=>({...t,[e]:""}))};return(0,a.jsxs)(s.Z,{sx:{p:3,maxWidth:800,mx:"auto"},children:[(0,a.jsxs)(s.Z,{sx:{mb:4},children:[(0,a.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,a.jsx)(j.default,{href:"/customers",style:{textDecoration:"none"},children:(0,a.jsx)(o.Z,{variant:"outlined",startIcon:(0,a.jsx)(f.Z,{}),sx:{minWidth:"auto"},children:"Back"})}),(0,a.jsx)(l.Z,{variant:"h4",component:"h1",sx:{fontWeight:700,color:"#1e293b"},children:"Create New Customer"})]}),(0,a.jsx)(l.Z,{variant:"body1",color:"textSecondary",children:"Add a new customer to the Flowlytix subscription system"})]}),(0,a.jsx)(c.Z,{elevation:3,children:(0,a.jsxs)(d.Z,{sx:{p:4},children:[A&&(0,a.jsx)(u.Z,{severity:"success",sx:{mb:3},children:A}),T&&(0,a.jsx)(u.Z,{severity:"error",sx:{mb:3},children:T}),(0,a.jsx)("form",{onSubmit:I,children:(0,a.jsxs)(h.ZP,{container:!0,spacing:3,children:[(0,a.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,a.jsxs)(l.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(g.Z,{color:"primary"}),"Customer Type"]}),(0,a.jsxs)(s.Z,{sx:{display:"flex",gap:1,mb:2},children:[(0,a.jsx)(m.Z,{label:"Business",clickable:!0,color:"business"===t.customerType?"primary":"default",onClick:()=>r(e=>({...e,customerType:"business"})),icon:(0,a.jsx)(b.Z,{})}),(0,a.jsx)(m.Z,{label:"Individual",clickable:!0,color:"individual"===t.customerType?"primary":"default",onClick:()=>r(e=>({...e,customerType:"individual"})),icon:(0,a.jsx)(g.Z,{})})]}),(0,a.jsx)(p.Z,{sx:{my:2}})]}),(0,a.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(v.Z,{fullWidth:!0,label:"Customer Name",value:t.name,onChange:R("name"),error:!!z.name,helperText:z.name,disabled:C,required:!0})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(v.Z,{fullWidth:!0,label:"Email Address",type:"email",value:t.email,onChange:R("email"),error:!!z.email,helperText:z.email,disabled:C,required:!0})}),"business"===t.customerType&&(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{fullWidth:!0,label:"Company Name",value:t.company,onChange:R("company"),error:!!z.company,helperText:z.company,disabled:C,required:!0})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(v.Z,{fullWidth:!0,label:"Phone Number",value:t.phone,onChange:R("phone"),error:!!z.phone,helperText:z.phone,disabled:C,placeholder:"+1-555-123-4567",required:!0})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(v.Z,{fullWidth:!0,label:"Address",value:t.address,onChange:R("address"),error:!!z.address,helperText:z.address,disabled:C,placeholder:"123 Main St, City, State 12345"})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsx)(v.Z,{fullWidth:!0,label:"Notes (Optional)",multiline:!0,rows:3,value:t.notes,onChange:R("notes"),disabled:C,placeholder:"Additional information about the customer..."})}),(0,a.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,a.jsx)(p.Z,{sx:{my:2}}),(0,a.jsxs)(s.Z,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[(0,a.jsx)(o.Z,{variant:"outlined",onClick:()=>{e.push("/customers")},disabled:C,startIcon:(0,a.jsx)(y.Z,{}),children:"Cancel"}),(0,a.jsx)(o.Z,{type:"submit",variant:"contained",disabled:C,startIcon:C?(0,a.jsx)(x.Z,{size:20}):(0,a.jsx)(Z,{}),sx:{minWidth:140},children:C?"Creating...":"Create Customer"})]})]})]})})]})})]})}},28223:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});let a=r(83464).Z.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var t,r,a,i,n;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="/login"),(null===(r=e.response)||void 0===r?void 0:r.status)===403&&console.error("Permission denied"),(null===(a=e.response)||void 0===a?void 0:a.status)>=500&&console.error("Server error:",(null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||e.message),Promise.reject(e)});class i{async get(e,t){try{let r=await this.instance.get(e,t);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}async post(e,t,r){try{let a=await this.instance.post(e,t,r);return{success:!0,data:a.data}}catch(e){return this.handleError(e)}}async put(e,t,r){try{let a=await this.instance.put(e,t,r);return{success:!0,data:a.data}}catch(e){return this.handleError(e)}}async patch(e,t,r){try{let a=await this.instance.patch(e,t,r);return{success:!0,data:a.data}}catch(e){return this.handleError(e)}}async delete(e,t){try{let r=await this.instance.delete(e,t);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}handleError(e){if(e.response){var t;return{success:!1,error:(null===(t=e.response.data)||void 0===t?void 0:t.message)||e.response.statusText}}return e.request?{success:!1,error:"Network error - please check your internet connection"}:{success:!1,error:e.message||"An unexpected error occurred"}}async uploadFile(e,t,r){let a=new FormData;a.append("file",t);try{let t=await this.instance.post(e,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(r&&e.total){let t=Math.round(100*e.loaded/e.total);r(t)}}});return{success:!0,data:t.data}}catch(e){return this.handleError(e)}}async downloadFile(e,t){try{let r=await this.instance.get(e,{responseType:"blob"}),a=new Blob([r.data]),i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=t,i.click(),window.URL.revokeObjectURL(i.href)}catch(e){throw console.error("File download failed:",e),e}}setAuthToken(e){this.instance.defaults.headers.Authorization="Bearer ".concat(e)}clearAuthToken(){delete this.instance.defaults.headers.Authorization}constructor(){this.instance=a}}let n=new i}},function(e){e.O(0,[355,152,160,425,735,593,404,414,971,117,744],function(){return e(e.s=47277)}),_N_E=e.O()}]);