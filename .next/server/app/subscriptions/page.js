(()=>{var e={};e.id=885,e.ids=[885],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},2395:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(94103),t(32039),t(35866);var s=t(23191),i=t(88716),a=t(37922),n=t.n(a),o=t(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let c=["",{children:["subscriptions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,94103)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/subscriptions/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32039)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/subscriptions/page.tsx"],u="/subscriptions/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/subscriptions/page",pathname:"/subscriptions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},49831:(e,r,t)=>{Promise.resolve().then(t.bind(t,14018))},29593:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(51426),i=t(10326);let a=(0,s.Z)((0,i.jsx)("path",{d:"m17 16-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5z"}),"DeviceHub")},66042:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(51426),i=t(10326);let a=(0,s.Z)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},55204:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(51426),i=t(10326);let a=(0,s.Z)((0,i.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},3735:(e,r,t)=>{"use strict";t.d(r,{Z:()=>_});var s=t(91367),i=t(45353),a=t(17577),n=t(41135),o=t(88634),l=t(8106),c=t(11190),d=t(93244),u=t(54641),x=t(91703),p=t(2791),h=t(71685),m=t(97898);function b(e){return(0,m.ZP)("MuiLinearProgress",e)}(0,h.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var f=t(10326);let g=["className","color","value","valueBuffer","variant"],Z=e=>e,v,j,y,C,P,w,D=(0,l.F4)(v||(v=Z`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),S=(0,l.F4)(j||(j=Z`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),k=(0,l.F4)(y||(y=Z`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),I=e=>{let{classes:r,variant:t,color:s}=e,i={root:["root",`color${(0,u.Z)(s)}`,t],dashed:["dashed",`dashedColor${(0,u.Z)(s)}`],bar1:["bar",`barColor${(0,u.Z)(s)}`,("indeterminate"===t||"query"===t)&&"bar1Indeterminate","determinate"===t&&"bar1Determinate","buffer"===t&&"bar1Buffer"],bar2:["bar","buffer"!==t&&`barColor${(0,u.Z)(s)}`,"buffer"===t&&`color${(0,u.Z)(s)}`,("indeterminate"===t||"query"===t)&&"bar2Indeterminate","buffer"===t&&"bar2Buffer"]};return(0,o.Z)(i,b,r)},q=(e,r)=>"inherit"===r?"currentColor":e.vars?e.vars.palette.LinearProgress[`${r}Bg`]:"light"===e.palette.mode?(0,c.$n)(e.palette[r].main,.62):(0,c._j)(e.palette[r].main,.5),z=(0,x.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[`color${(0,u.Z)(t.color)}`],r[t.variant]]}})(({ownerState:e,theme:r})=>(0,i.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:q(r,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"})),A=(0,x.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.dashed,r[`dashedColor${(0,u.Z)(t.color)}`]]}})(({ownerState:e,theme:r})=>{let t=q(r,e.color);return(0,i.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${t} 0%, ${t} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},(0,l.iv)(C||(C=Z`
    animation: ${0} 3s infinite linear;
  `),k)),M=(0,x.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.bar,r[`barColor${(0,u.Z)(t.color)}`],("indeterminate"===t.variant||"query"===t.variant)&&r.bar1Indeterminate,"determinate"===t.variant&&r.bar1Determinate,"buffer"===t.variant&&r.bar1Buffer]}})(({ownerState:e,theme:r})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(r.vars||r).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,l.iv)(P||(P=Z`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),D)),L=(0,x.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.bar,r[`barColor${(0,u.Z)(t.color)}`],("indeterminate"===t.variant||"query"===t.variant)&&r.bar2Indeterminate,"buffer"===t.variant&&r.bar2Buffer]}})(({ownerState:e,theme:r})=>(0,i.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(r.vars||r).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:q(r,e.color),transition:"transform .4s linear"}),({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,l.iv)(w||(w=Z`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),S)),_=a.forwardRef(function(e,r){let t=(0,p.i)({props:e,name:"MuiLinearProgress"}),{className:a,color:o="primary",value:l,valueBuffer:c,variant:u="indeterminate"}=t,x=(0,s.Z)(t,g),h=(0,i.Z)({},t,{color:o,variant:u}),m=I(h),b=(0,d.V)(),Z={},v={bar1:{},bar2:{}};if(("determinate"===u||"buffer"===u)&&void 0!==l){Z["aria-valuenow"]=Math.round(l),Z["aria-valuemin"]=0,Z["aria-valuemax"]=100;let e=l-100;b&&(e=-e),v.bar1.transform=`translateX(${e}%)`}if("buffer"===u&&void 0!==c){let e=(c||0)-100;b&&(e=-e),v.bar2.transform=`translateX(${e}%)`}return(0,f.jsxs)(z,(0,i.Z)({className:(0,n.Z)(m.root,a),ownerState:h,role:"progressbar"},Z,{ref:r},x,{children:["buffer"===u?(0,f.jsx)(A,{className:m.dashed,ownerState:h}):null,(0,f.jsx)(M,{className:m.bar1,ownerState:h,style:v.bar1}),"determinate"===u?null:(0,f.jsx)(L,{className:m.bar2,ownerState:h,style:v.bar2})]}))})},14018:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>eu});var s=t(10326),i=t(17577),a=t(35047),n=t(71728),o=t(98139),l=t(7783),c=t(9861),d=t(30274),u=t(42265),x=t(34039),p=t(4766),h=t(90541),m=t(57329),b=t(98956),f=t(50219),g=t(23543),Z=t(72163),v=t(36112),j=t(59777),y=t(33198),C=t(85560),P=t(3735),w=t(48260),D=t(92528),S=t(15054),k=t(37841),I=t(78969),q=t(25886),z=t(43659),A=t(98117),M=t(28591),L=t(91367),_=t(45353),R=t(41135),W=t(88634),$=t(91703),B=t(27080),T=t(2791),E=t(71685),N=t(97898);function F(e){return(0,N.ZP)("MuiDialogContentText",e)}(0,E.Z)("MuiDialogContentText",["root"]);let U=["children","className"],O=e=>{let{classes:r}=e,t=(0,W.Z)({root:["root"]},F,r);return(0,_.Z)({},r,t)},V=(0,$.ZP)(d.Z,{shouldForwardProp:e=>(0,B.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,r)=>r.root})({}),K=i.forwardRef(function(e,r){let t=(0,T.i)({props:e,name:"MuiDialogContentText"}),{className:i}=t,a=(0,L.Z)(t,U),n=O(a);return(0,s.jsx)(V,(0,_.Z)({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:a,className:(0,R.Z)(n.root,i)},t,{classes:n}))});var G=t(10163),H=t(80110),Q=t(3423),X=t(15114),J=t(76383),Y=t(29593),ee=t(88337),er=t(66042),et=t(67840),es=t(51426);let ei=(0,es.Z)((0,s.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),ea=(0,es.Z)((0,s.jsx)("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause");var en=t(96889),eo=t(55204),el=t(90434),ec=t(24493),ed=t(35342);function eu(){let e=(0,a.useRouter)(),{subscriptions:r,isLoading:t,error:L,deleteSubscription:_,updateSubscription:R,suspendSubscription:W,resumeSubscription:$,fetchSubscriptions:B,isDeleting:T,isUpdating:E,clearError:N}=(0,ec.P)(),[F,U]=(0,i.useState)(""),[O,V]=(0,i.useState)(0),[es,eu]=(0,i.useState)(10),[ep,eh]=(0,i.useState)(null),[em,eb]=(0,i.useState)(null),[ef,eg]=(0,i.useState)(!1),[eZ,ev]=(0,i.useState)(null),[ej,ey]=(0,i.useState)(!1),[eC,eP]=(0,i.useState)(null),[ew,eD]=(0,i.useState)(!1),[eS,ek]=(0,i.useState)(""),[eI,eq]=(0,i.useState)("success"),ez=(e,r)=>{eh(e.currentTarget),eb(r)},eA=()=>{eh(null),eb(null)},eM=async()=>{if(em)try{let e=await W(em.id,"Suspended by administrator");e.success?(eW("Subscription suspended successfully","success"),B()):eW(e.error||"Failed to suspend subscription","error")}catch(e){eW("Failed to suspend subscription","error")}eA()},eL=async()=>{if(em)try{let e=await $(em.id);e.success?(eW("Subscription resumed successfully","success"),B()):eW(e.error||"Failed to resume subscription","error")}catch(e){eW("Failed to resume subscription","error")}eA()},e_=async()=>{if(eZ)try{let e=await _(eZ.id);e.success?(eW("Subscription deleted successfully","success"),B()):eW(e.error||"Failed to delete subscription","error")}catch(e){eW("Failed to delete subscription","error")}eg(!1),ev(null)},eR=()=>{eg(!1),ev(null)},eW=(e,r)=>{ek(e),eq(r),eD(!0)},e$=()=>{eD(!1)},eB=async(e,r)=>{try{let t=await R(e,r);t.success?(eW("Subscription updated successfully","success"),ey(!1),eP(null),B()):eW(t.error||"Failed to update subscription","error")}catch(e){eW("Failed to update subscription","error")}},eT=(r||[]).filter(e=>e.licenseKey.toLowerCase().includes(F.toLowerCase())||e.tier.toLowerCase().includes(F.toLowerCase())||e.customerName?.toLowerCase().includes(F.toLowerCase())||e.customerId?.toLowerCase().includes(F.toLowerCase())),eE=eT.slice(O*es,O*es+es),eN=e=>{switch(e){case"active":return"success";case"suspended":return"warning";case"expired":return"error";default:return"default"}},eF=e=>{switch(e){case"basic":default:return"#64748b";case"professional":return"#3b82f6";case"enterprise":return"#8b5cf6"}},eU=e=>new Date(e).toLocaleDateString(),eO=e=>{let r=new Date(e),t=new Date,s=Math.ceil((r.getTime()-t.getTime())/864e5);return s<=30&&s>0};return t?s.jsx(n.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:s.jsx(o.Z,{size:48})}):(0,s.jsxs)(n.Z,{sx:{px:2,py:1},children:[s.jsx(l.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:T||E,children:s.jsx(o.Z,{color:"inherit"})}),L&&s.jsx(c.Z,{severity:"error",sx:{mb:2},onClose:N,children:L}),(0,s.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"h4",component:"h1",fontWeight:"bold",color:"primary",children:"Subscriptions"}),s.jsx(d.Z,{variant:"body1",color:"text.secondary",children:"Manage licenses and subscription plans"})]}),s.jsx(el.default,{href:"/subscriptions/create",passHref:!0,children:s.jsx(u.Z,{variant:"contained",startIcon:s.jsx(Q.Z,{}),sx:{borderRadius:2},children:"Create Subscription"})})]}),s.jsx(x.Z,{sx:{mb:3},children:s.jsx(p.Z,{children:s.jsx(n.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:s.jsx(h.Z,{placeholder:"Search subscriptions...",value:F,onChange:e=>{U(e.target.value),V(0)},sx:{flex:1},InputProps:{startAdornment:s.jsx(m.Z,{position:"start",children:s.jsx(X.Z,{})})}})})})}),(0,s.jsxs)(x.Z,{children:[s.jsx(b.Z,{children:(0,s.jsxs)(f.Z,{children:[s.jsx(g.Z,{children:(0,s.jsxs)(Z.Z,{children:[s.jsx(v.Z,{children:"Customer"}),s.jsx(v.Z,{children:"License Key"}),s.jsx(v.Z,{children:"Tier"}),s.jsx(v.Z,{children:"Status"}),s.jsx(v.Z,{children:"Devices"}),s.jsx(v.Z,{children:"Expires"}),s.jsx(v.Z,{children:"Revenue"}),s.jsx(v.Z,{align:"right",children:"Actions"})]})}),s.jsx(j.Z,{children:eE.map(e=>(0,s.jsxs)(Z.Z,{hover:!0,children:[s.jsx(v.Z,{children:(0,s.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(y.Z,{sx:{bgcolor:"primary.main"},children:e.customerName?.charAt(0).toUpperCase()||"U"}),(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,children:e.customerName||"Unknown Customer"}),s.jsx(d.Z,{variant:"body2",color:"textSecondary",children:e.customerId})]})]})}),s.jsx(v.Z,{children:(0,s.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(J.Z,{sx:{fontSize:16,color:"text.secondary"}}),s.jsx(d.Z,{variant:"body2",sx:{fontFamily:"monospace"},children:e.licenseKey})]})}),s.jsx(v.Z,{children:s.jsx(C.Z,{label:e.tier.toUpperCase(),size:"small",sx:{bgcolor:eF(e.tier),color:"white",fontWeight:600}})}),(0,s.jsxs)(v.Z,{children:[s.jsx(C.Z,{label:e.status.toUpperCase(),size:"small",color:eN(e.status),variant:"filled"}),eO(e.expiresAt)&&s.jsx(C.Z,{label:"Expiring Soon",size:"small",color:"warning",variant:"outlined",sx:{ml:1}})]}),s.jsx(v.Z,{children:(0,s.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(Y.Z,{sx:{fontSize:16,color:"text.secondary"}}),(0,s.jsxs)(d.Z,{variant:"body2",children:[e.devicesConnected||0,"/",e.maxDevices]}),s.jsx(P.Z,{variant:"determinate",value:(e.devicesConnected||0)/e.maxDevices*100,sx:{width:40,height:6,borderRadius:3,bgcolor:"#e2e8f0","& .MuiLinearProgress-bar":{bgcolor:e.devicesConnected===e.maxDevices?"#ef4444":"#10b981"}}})]})}),s.jsx(v.Z,{children:s.jsx(d.Z,{variant:"body2",color:"text.secondary",children:eU(e.expiresAt)})}),s.jsx(v.Z,{children:s.jsx(d.Z,{variant:"body2",fontWeight:600,children:(()=>{let r=0;switch(e.tier){case ed.QV.BASIC:r=299;break;case ed.QV.PROFESSIONAL:r=599;break;case ed.QV.ENTERPRISE:r=1299;break;default:r=299}return`PKR ${r.toLocaleString()}`})()})}),s.jsx(v.Z,{align:"right",children:s.jsx(w.Z,{onClick:r=>ez(r,e),children:s.jsx(ee.Z,{})})})]},e.id))})]})}),s.jsx(D.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:eT.length,rowsPerPage:es,page:O,onPageChange:(e,r)=>{V(r)},onRowsPerPageChange:e=>{eu(parseInt(e.target.value,10)),V(0)}})]}),(0,s.jsxs)(S.Z,{anchorEl:ep,open:!!ep,onClose:eA,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,s.jsxs)(k.Z,{onClick:()=>{em&&e.push(`/subscriptions/${em.id}`),eA()},children:[s.jsx(I.Z,{children:s.jsx(er.Z,{fontSize:"small"})}),s.jsx(q.Z,{children:"View Details"})]}),(0,s.jsxs)(k.Z,{onClick:()=>{em&&(eP(em),ey(!0)),eA()},children:[s.jsx(I.Z,{children:s.jsx(et.Z,{fontSize:"small"})}),s.jsx(q.Z,{children:"Edit Subscription"})]}),em?.status==="suspended"?(0,s.jsxs)(k.Z,{onClick:eL,children:[s.jsx(I.Z,{children:s.jsx(ei,{fontSize:"small"})}),s.jsx(q.Z,{children:"Resume"})]}):(0,s.jsxs)(k.Z,{onClick:eM,children:[s.jsx(I.Z,{children:s.jsx(ea,{fontSize:"small"})}),s.jsx(q.Z,{children:"Suspend"})]}),(0,s.jsxs)(k.Z,{onClick:()=>{em&&(ev(em),eg(!0)),eA()},sx:{color:"error.main"},children:[s.jsx(I.Z,{children:s.jsx(en.Z,{fontSize:"small",color:"error"})}),s.jsx(q.Z,{children:"Delete Subscription"})]})]}),(0,s.jsxs)(z.Z,{open:ef,onClose:eR,maxWidth:"sm",fullWidth:!0,children:[(0,s.jsxs)(A.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(eo.Z,{color:"error"}),"Confirm Delete Subscription"]}),(0,s.jsxs)(M.Z,{children:[s.jsx(K,{children:"Are you sure you want to delete this subscription? This action cannot be undone."}),eZ&&(0,s.jsxs)(n.Z,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,children:"Subscription Details:"}),(0,s.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Customer: ",eZ.customerName]}),(0,s.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["License Key: ",eZ.licenseKey]}),(0,s.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Tier: ",eZ.tier]}),(0,s.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Status: ",eZ.status]})]})]}),(0,s.jsxs)(G.Z,{children:[s.jsx(u.Z,{onClick:eR,color:"primary",children:"Cancel"}),s.jsx(u.Z,{onClick:e_,color:"error",variant:"contained",disabled:T,children:T?"Deleting...":"Delete"})]})]}),s.jsx(ex,{open:ej,subscription:eC,onClose:()=>{ey(!1),eP(null)},onSubmit:eB,isUpdating:E}),s.jsx(H.Z,{open:ew,autoHideDuration:6e3,onClose:e$,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:s.jsx(c.Z,{onClose:e$,severity:eI,sx:{width:"100%"},children:eS})})]})}let ex=({open:e,subscription:r,onClose:t,onSubmit:a,isUpdating:o})=>{let[l,c]=(0,i.useState)({tier:"",features:[],maxDevices:1,expiresAt:"",gracePeriodDays:0,notes:""}),[x,p]=(0,i.useState)({});(0,i.useEffect)(()=>{r&&(c({tier:r.tier||"",features:r.features||[],maxDevices:r.maxDevices||1,expiresAt:r.expiresAt?new Date(r.expiresAt).toISOString().split("T")[0]:"",gracePeriodDays:r.gracePeriodDays||0,notes:r.notes||""}),p({}))},[r]);let m=(e,r)=>{c(t=>({...t,[e]:r})),x[e]&&p(r=>({...r,[e]:""}))},b=e=>{c(r=>({...r,features:r.features.includes(e)?r.features.filter(r=>r!==e):[...r.features,e]}))},f=()=>{let e={};return(l.tier||(e.tier="Tier is required"),l.maxDevices<1&&(e.maxDevices="Max devices must be at least 1"),l.maxDevices>1e3&&(e.maxDevices="Max devices cannot exceed 1000"),l.expiresAt)?new Date(l.expiresAt)<=new Date&&(e.expiresAt="Expiration date must be in the future"):e.expiresAt="Expiration date is required",l.gracePeriodDays<0&&(e.gracePeriodDays="Grace period cannot be negative"),l.gracePeriodDays>365&&(e.gracePeriodDays="Grace period cannot exceed 365 days"),p(e),0===Object.keys(e).length},g=()=>{c({tier:"",features:[],maxDevices:1,expiresAt:"",gracePeriodDays:0,notes:""}),p({}),t()};return(0,s.jsxs)(z.Z,{open:e,onClose:g,maxWidth:"md",fullWidth:!0,children:[(0,s.jsxs)(A.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(et.Z,{color:"primary"}),"Edit Subscription"]}),(0,s.jsxs)(M.Z,{dividers:!0,children:[r&&(0,s.jsxs)(n.Z,{sx:{mb:3,p:2,bgcolor:"grey.50",borderRadius:1},children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Subscription Information"}),(0,s.jsxs)(n.Z,{sx:{display:"flex",gap:3},children:[(0,s.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:[s.jsx("strong",{children:"Customer:"})," ",r.customerName]}),(0,s.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:[s.jsx("strong",{children:"License Key:"})," ",r.licenseKey]}),(0,s.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:[s.jsx("strong",{children:"Status:"})," ",r.status]})]})]}),(0,s.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Subscription Tier *"}),s.jsx(n.Z,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[{value:"basic",label:"Basic",color:"#64748b"},{value:"professional",label:"Professional",color:"#3b82f6"},{value:"enterprise",label:"Enterprise",color:"#8b5cf6"}].map(e=>s.jsx(u.Z,{variant:l.tier===e.value?"contained":"outlined",onClick:()=>m("tier",e.value),sx:{...l.tier===e.value&&{bgcolor:e.color,"&:hover":{bgcolor:e.color}}},children:e.label},e.value))}),x.tier&&s.jsx(d.Z,{variant:"body2",color:"error",sx:{mt:1},children:x.tier})]}),(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Maximum Devices *"}),s.jsx(h.Z,{type:"number",value:l.maxDevices,onChange:e=>m("maxDevices",parseInt(e.target.value)||1),error:!!x.maxDevices,helperText:x.maxDevices,inputProps:{min:1,max:1e3},sx:{width:"200px"}})]}),(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Expiration Date *"}),s.jsx(h.Z,{type:"date",value:l.expiresAt,onChange:e=>m("expiresAt",e.target.value),error:!!x.expiresAt,helperText:x.expiresAt,sx:{width:"200px"}})]}),(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Grace Period (Days)"}),s.jsx(h.Z,{type:"number",value:l.gracePeriodDays,onChange:e=>m("gracePeriodDays",parseInt(e.target.value)||0),error:!!x.gracePeriodDays,helperText:x.gracePeriodDays||"Number of days after expiration before subscription is cancelled",inputProps:{min:0,max:365},sx:{width:"200px"}})]}),(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Features"}),s.jsx(n.Z,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:["analytics","reporting","api_access","priority_support","custom_branding","advanced_security","bulk_operations","multi_tenant"].map(e=>s.jsx(C.Z,{label:e.replace("_"," ").toUpperCase(),clickable:!0,variant:l.features.includes(e)?"filled":"outlined",color:l.features.includes(e)?"primary":"default",onClick:()=>b(e),size:"small"},e))})]}),(0,s.jsxs)(n.Z,{children:[s.jsx(d.Z,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Notes"}),s.jsx(h.Z,{multiline:!0,rows:3,value:l.notes,onChange:e=>m("notes",e.target.value),placeholder:"Add any additional notes or comments...",fullWidth:!0})]})]})]}),(0,s.jsxs)(G.Z,{children:[s.jsx(u.Z,{onClick:g,color:"primary",children:"Cancel"}),s.jsx(u.Z,{onClick:()=>{if(!r||!f())return;let e={tier:l.tier,features:l.features,maxDevices:l.maxDevices,expiresAt:new Date(l.expiresAt),gracePeriodDays:l.gracePeriodDays,notes:l.notes||void 0};a(r.id,e)},color:"primary",variant:"contained",disabled:o,children:o?"Updating...":"Update Subscription"})]})]})}},94103:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/subscriptions/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[762,908,82,861,348,541,754,719,469,779,65,498],()=>t(2395));module.exports=s})();