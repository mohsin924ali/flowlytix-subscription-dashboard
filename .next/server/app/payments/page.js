(()=>{var e={};e.id=74,e.ids=[74],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},733:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(18102),r(32039),r(35866);var a=r(23191),n=r(88716),s=r(37922),o=r.n(s),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["payments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,18102)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/payments/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,32039)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/payments/page.tsx"],u="/payments/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/payments/page",pathname:"/payments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},73931:(e,t,r)=>{Promise.resolve().then(r.bind(r,86205))},80751:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(51426),n=r(10326);let s=(0,a.Z)((0,n.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList")},86205:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>t0});var a=r(10326),n=r(17577),s=r(91367),o=r(45353),i=r(41135),l=r(97898),c=r(88634),d=r(96005),u=r(6333),p=r(27777),m=r(67240);let h=["className","component","disableGutters","fixed","maxWidth","classes"],g=(0,m.Z)(),y=(0,p.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`maxWidth${(0,d.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),x=e=>(0,u.Z)({props:e,name:"MuiContainer",defaultTheme:g}),f=(e,t)=>{let{classes:r,fixed:a,disableGutters:n,maxWidth:s}=e,o={root:["root",s&&`maxWidth${(0,d.Z)(String(s))}`,a&&"fixed",n&&"disableGutters"]};return(0,c.Z)(o,e=>(0,l.ZP)(t,e),r)};var b=r(54641),v=r(91703),Z=r(2791);let P=function(e={}){let{createStyledComponent:t=y,useThemeProps:r=x,componentName:l="MuiContainer"}=e,c=t(({theme:e,ownerState:t})=>(0,o.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((t,r)=>{let a=e.breakpoints.values[r];return 0!==a&&(t[e.breakpoints.up(r)]={maxWidth:`${a}${e.breakpoints.unit}`}),t},{}),({theme:e,ownerState:t})=>(0,o.Z)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}));return n.forwardRef(function(e,t){let n=r(e),{className:d,component:u="div",disableGutters:p=!1,fixed:m=!1,maxWidth:g="lg"}=n,y=(0,s.Z)(n,h),x=(0,o.Z)({},n,{component:u,disableGutters:p,fixed:m,maxWidth:g}),b=f(x,l);return(0,a.jsx)(c,(0,o.Z)({as:u,ownerState:x,className:(0,i.Z)(b.root,d),ref:t},y))})}({createStyledComponent:(0,v.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`maxWidth${(0,b.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,Z.i)({props:e,name:"MuiContainer"})});var w=r(71728),C=r(30274),j=r(9861),k=r(16027),S=r(34039),M=r(4766),R=r(17082),I=r(42265),D=r(43659),F=r(98117),A=r(28591),L=r(90541),z=r(53913),T=r(12313),$=r(56390),E=r(37841),W=r(10163),N=r(80110),U=r(3423),_=r(51426);let O=(0,_.Z)((0,a.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download");var B=r(20747),V=r(75887),q=r(85560),H=r(98139),G=r(98956),X=r(60893),K=r(50219),J=r(23543),Y=r(72163),Q=r(36112),ee=r(11190),et=r(33662);let er=(0,_.Z)((0,a.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),ea=(0,_.Z)((0,a.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),en=(0,_.Z)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var es=r(27080),eo=r(71685);function ei(e){return(0,l.ZP)("MuiCheckbox",e)}let el=(0,eo.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),ec=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],ed=e=>{let{classes:t,indeterminate:r,color:a,size:n}=e,s={root:["root",r&&"indeterminate",`color${(0,b.Z)(a)}`,`size${(0,b.Z)(n)}`]},i=(0,c.Z)(s,ei,t);return(0,o.Z)({},t,i)},eu=(0,v.ZP)(et.Z,{shouldForwardProp:e=>(0,es.Z)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${(0,b.Z)(r.size)}`],"default"!==r.color&&t[`color${(0,b.Z)(r.color)}`]]}})(({theme:e,ownerState:t})=>(0,o.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,ee.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${el.checked}, &.${el.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${el.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),ep=(0,a.jsx)(ea,{}),em=(0,a.jsx)(er,{}),eh=(0,a.jsx)(en,{}),eg=n.forwardRef(function(e,t){var r,l;let c=(0,Z.i)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=ep,color:u="primary",icon:p=em,indeterminate:m=!1,indeterminateIcon:h=eh,inputProps:g,size:y="medium",className:x}=c,f=(0,s.Z)(c,ec),b=m?h:p,v=m?h:d,P=(0,o.Z)({},c,{color:u,indeterminate:m,size:y}),w=ed(P);return(0,a.jsx)(eu,(0,o.Z)({type:"checkbox",inputProps:(0,o.Z)({"data-indeterminate":m},g),icon:n.cloneElement(b,{fontSize:null!=(r=b.props.fontSize)?r:y}),checkedIcon:n.cloneElement(v,{fontSize:null!=(l=v.props.fontSize)?l:y}),ownerState:P,ref:t,className:(0,i.Z)(w.root,x)},f,{classes:w}))});var ey=r(68280);let ex=(0,_.Z)((0,a.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function ef(e){return(0,l.ZP)("MuiTableSortLabel",e)}let eb=(0,eo.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),ev=["active","children","className","direction","hideSortIcon","IconComponent"],eZ=e=>{let{classes:t,direction:r,active:a}=e,n={root:["root",a&&"active"],icon:["icon",`iconDirection${(0,b.Z)(r)}`]};return(0,c.Z)(n,ef,t)},eP=(0,v.ZP)(ey.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.active&&t.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${eb.icon}`]:{opacity:.5}},[`&.${eb.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${eb.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),ew=(0,v.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.icon,t[`iconDirection${(0,b.Z)(r.direction)}`]]}})(({theme:e,ownerState:t})=>(0,o.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})),eC=n.forwardRef(function(e,t){let r=(0,Z.i)({props:e,name:"MuiTableSortLabel"}),{active:n=!1,children:l,className:c,direction:d="asc",hideSortIcon:u=!1,IconComponent:p=ex}=r,m=(0,s.Z)(r,ev),h=(0,o.Z)({},r,{active:n,direction:d,hideSortIcon:u,IconComponent:p}),g=eZ(h);return(0,a.jsxs)(eP,(0,o.Z)({className:(0,i.Z)(g.root,c),component:"span",disableRipple:!0,ownerState:h,ref:t},m,{children:[l,u&&!n?null:(0,a.jsx)(ew,{as:p,className:(0,i.Z)(g.icon),ownerState:h})]}))});var ej=r(59777),ek=r(85810),eS=r(93244),eM=r(18349),eR=r(83784),eI=r(23743),eD=r(14962),eF=r(69035),eA=r(24533),eL=r(37382),ez=r(87816),eT=r(93833),e$=r(86102);function eE(e){return(0,l.ZP)("MuiTooltip",e)}let eW=(0,eo.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),eN=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"],eU=e=>{let{classes:t,disableInteractive:r,arrow:a,touch:n,placement:s}=e,o={popper:["popper",!r&&"popperInteractive",a&&"popperArrow"],tooltip:["tooltip",a&&"tooltipArrow",n&&"touch",`tooltipPlacement${(0,b.Z)(s.split("-")[0])}`],arrow:["arrow"]};return(0,c.Z)(o,eE,t)},e_=(0,v.ZP)(eF.Z,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(({theme:e,ownerState:t,open:r})=>(0,o.Z)({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${eW.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${eW.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${eW.arrow}`]:(0,o.Z)({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${eW.arrow}`]:(0,o.Z)({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),eO=(0,v.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,b.Z)(r.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>(0,o.Z)({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:(0,ee.Fq)(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Math.round(16/14*1e5)/1e5}em`,fontWeight:e.typography.fontWeightRegular},{[`.${eW.popper}[data-popper-placement*="left"] &`]:(0,o.Z)({transformOrigin:"right center"},t.isRtl?(0,o.Z)({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):(0,o.Z)({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${eW.popper}[data-popper-placement*="right"] &`]:(0,o.Z)({transformOrigin:"left center"},t.isRtl?(0,o.Z)({marginRight:"14px"},t.touch&&{marginRight:"24px"}):(0,o.Z)({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${eW.popper}[data-popper-placement*="top"] &`]:(0,o.Z)({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${eW.popper}[data-popper-placement*="bottom"] &`]:(0,o.Z)({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),eB=(0,v.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:(0,ee.Fq)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})),eV=!1,eq=new ek.V,eH={x:0,y:0};function eG(e,t){return(r,...a)=>{t&&t(r,...a),e(r,...a)}}let eX=n.forwardRef(function(e,t){var r,l,c,d,u,p,m,h,g,y,x,f,b,v,P,w,C,j,k;let S=(0,Z.i)({props:e,name:"MuiTooltip"}),{arrow:M=!1,children:R,components:I={},componentsProps:D={},describeChild:F=!1,disableFocusListener:A=!1,disableHoverListener:L=!1,disableInteractive:z=!1,disableTouchListener:T=!1,enterDelay:$=100,enterNextDelay:E=0,enterTouchDelay:W=700,followCursor:N=!1,id:U,leaveDelay:_=0,leaveTouchDelay:O=1500,onClose:B,onOpen:V,open:q,placement:H="bottom",PopperComponent:G,PopperProps:X={},slotProps:K={},slots:J={},title:Y,TransitionComponent:Q=eD.Z,TransitionProps:ee}=S,et=(0,s.Z)(S,eN),er=n.isValidElement(R)?R:(0,a.jsx)("span",{children:R}),ea=(0,eI.Z)(),en=(0,eS.V)(),[es,eo]=n.useState(),[ei,el]=n.useState(null),ec=n.useRef(!1),ed=z||N,eu=(0,ek.Z)(),ep=(0,ek.Z)(),em=(0,ek.Z)(),eh=(0,ek.Z)(),[eg,ey]=(0,e$.Z)({controlled:q,default:!1,name:"Tooltip",state:"open"}),ex=eg,ef=(0,ez.Z)(U),eb=n.useRef(),ev=(0,eA.Z)(()=>{void 0!==eb.current&&(document.body.style.WebkitUserSelect=eb.current,eb.current=void 0),eh.clear()});n.useEffect(()=>ev,[ev]);let eZ=e=>{eq.clear(),eV=!0,ey(!0),V&&!ex&&V(e)},eP=(0,eA.Z)(e=>{eq.start(800+_,()=>{eV=!1}),ey(!1),B&&ex&&B(e),eu.start(ea.transitions.duration.shortest,()=>{ec.current=!1})}),ew=e=>{ec.current&&"touchstart"!==e.type||(es&&es.removeAttribute("title"),ep.clear(),em.clear(),$||eV&&E?ep.start(eV?E:$,()=>{eZ(e)}):eZ(e))},eC=e=>{ep.clear(),em.start(_,()=>{eP(e)})},{isFocusVisibleRef:ej,onBlur:eE,onFocus:eW,ref:eX}=(0,eT.Z)(),[,eK]=n.useState(!1),eJ=e=>{eE(e),!1===ej.current&&(eK(!1),eC(e))},eY=e=>{es||eo(e.currentTarget),eW(e),!0===ej.current&&(eK(!0),ew(e))},eQ=e=>{ec.current=!0;let t=er.props;t.onTouchStart&&t.onTouchStart(e)};n.useEffect(()=>{if(ex)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){("Escape"===e.key||"Esc"===e.key)&&eP(e)}},[eP,ex]);let e0=(0,eL.Z)((0,eR.Z)(er),eX,eo,t);Y||0===Y||(ex=!1);let e1=n.useRef(),e2={},e4="string"==typeof Y;F?(e2.title=ex||!e4||L?null:Y,e2["aria-describedby"]=ex?ef:null):(e2["aria-label"]=e4?Y:null,e2["aria-labelledby"]=ex&&!e4?ef:null);let e8=(0,o.Z)({},e2,et,er.props,{className:(0,i.Z)(et.className,er.props.className),onTouchStart:eQ,ref:e0},N?{onMouseMove:e=>{let t=er.props;t.onMouseMove&&t.onMouseMove(e),eH={x:e.clientX,y:e.clientY},e1.current&&e1.current.update()}}:{}),e5={};T||(e8.onTouchStart=e=>{eQ(e),em.clear(),eu.clear(),ev(),eb.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",eh.start(W,()=>{document.body.style.WebkitUserSelect=eb.current,ew(e)})},e8.onTouchEnd=e=>{er.props.onTouchEnd&&er.props.onTouchEnd(e),ev(),em.start(O,()=>{eP(e)})}),L||(e8.onMouseOver=eG(ew,e8.onMouseOver),e8.onMouseLeave=eG(eC,e8.onMouseLeave),ed||(e5.onMouseOver=ew,e5.onMouseLeave=eC)),A||(e8.onFocus=eG(eY,e8.onFocus),e8.onBlur=eG(eJ,e8.onBlur),ed||(e5.onFocus=eY,e5.onBlur=eJ));let e3=n.useMemo(()=>{var e;let t=[{name:"arrow",enabled:!!ei,options:{element:ei,padding:4}}];return null!=(e=X.popperOptions)&&e.modifiers&&(t=t.concat(X.popperOptions.modifiers)),(0,o.Z)({},X.popperOptions,{modifiers:t})},[ei,X]),e6=(0,o.Z)({},S,{isRtl:en,arrow:M,disableInteractive:ed,placement:H,PopperComponentProp:G,touch:ec.current}),e7=eU(e6),e9=null!=(r=null!=(l=J.popper)?l:I.Popper)?r:e_,te=null!=(c=null!=(d=null!=(u=J.transition)?u:I.Transition)?d:Q)?c:eD.Z,tt=null!=(p=null!=(m=J.tooltip)?m:I.Tooltip)?p:eO,tr=null!=(h=null!=(g=J.arrow)?g:I.Arrow)?h:eB,ta=(0,eM.Z)(e9,(0,o.Z)({},X,null!=(y=K.popper)?y:D.popper,{className:(0,i.Z)(e7.popper,null==X?void 0:X.className,null==(x=null!=(f=K.popper)?f:D.popper)?void 0:x.className)}),e6),tn=(0,eM.Z)(te,(0,o.Z)({},ee,null!=(b=K.transition)?b:D.transition),e6),ts=(0,eM.Z)(tt,(0,o.Z)({},null!=(v=K.tooltip)?v:D.tooltip,{className:(0,i.Z)(e7.tooltip,null==(P=null!=(w=K.tooltip)?w:D.tooltip)?void 0:P.className)}),e6),to=(0,eM.Z)(tr,(0,o.Z)({},null!=(C=K.arrow)?C:D.arrow,{className:(0,i.Z)(e7.arrow,null==(j=null!=(k=K.arrow)?k:D.arrow)?void 0:j.className)}),e6);return(0,a.jsxs)(n.Fragment,{children:[n.cloneElement(er,e8),(0,a.jsx)(e9,(0,o.Z)({as:null!=G?G:eF.Z,placement:H,anchorEl:N?{getBoundingClientRect:()=>({top:eH.y,left:eH.x,right:eH.x,bottom:eH.y,width:0,height:0})}:es,popperRef:e1,open:!!es&&ex,id:ef,transition:!0},e5,ta,{popperOptions:e3,children:({TransitionProps:e})=>(0,a.jsx)(te,(0,o.Z)({timeout:ea.transitions.duration.shorter},e,tn,{children:(0,a.jsxs)(tt,(0,o.Z)({},ts,{children:[Y,M?(0,a.jsx)(tr,(0,o.Z)({},to,{ref:el})):null]}))}))}))]})});var eK=r(48260),eJ=r(15054);let eY=(0,_.Z)((0,a.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt");var eQ=r(67840),e0=r(86168);let e1=(0,_.Z)((0,a.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History");var e2=r(96889),e4=r(88337);(0,v.ZP)(q.Z,{shouldForwardProp:e=>"statusVariant"!==e})(({theme:e,statusVariant:t})=>({fontWeight:600,fontSize:"0.75rem",height:"24px",textTransform:"uppercase",letterSpacing:"0.05em",...(()=>{switch(t){case"active":return{backgroundColor:e.palette.success.light,color:e.palette.success.dark,border:`1px solid ${e.palette.success.main}`};case"expired":case"inactive":return{backgroundColor:e.palette.error.light,color:e.palette.error.dark,border:`1px solid ${e.palette.error.main}`};case"suspended":return{backgroundColor:e.palette.warning.light,color:e.palette.warning.dark,border:`1px solid ${e.palette.warning.main}`};case"cancelled":case"revoked":default:return{backgroundColor:e.palette.grey[100],color:e.palette.grey[700],border:`1px solid ${e.palette.grey[400]}`};case"pending":return{backgroundColor:e.palette.info.light,color:e.palette.info.dark,border:`1px solid ${e.palette.info.main}`}}})()}));let e8=(0,_.Z)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),e5=(0,_.Z)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),e3=(0,_.Z)((0,a.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay"),e6=(0,_.Z)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn"),e7=(0,_.Z)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12m8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8"}),"Block"),e9=(0,v.ZP)(q.Z,{shouldForwardProp:e=>"paymentStatus"!==e})(({theme:e,paymentStatus:t})=>({fontWeight:600,fontSize:"0.75rem",height:"24px",textTransform:"uppercase",letterSpacing:"0.05em",...(()=>{switch(t){case"completed":return{backgroundColor:e.palette.success.light,color:e.palette.success.dark,border:`1px solid ${e.palette.success.main}`};case"pending":case"processing":return{backgroundColor:e.palette.info.light,color:e.palette.info.dark,border:`1px solid ${e.palette.info.main}`};case"failed":case"expired":return{backgroundColor:e.palette.error.light,color:e.palette.error.dark,border:`1px solid ${e.palette.error.main}`};case"cancelled":default:return{backgroundColor:e.palette.grey[100],color:e.palette.grey[700],border:`1px solid ${e.palette.grey[400]}`};case"refunded":case"partially_refunded":return{backgroundColor:e.palette.warning.light,color:e.palette.warning.dark,border:`1px solid ${e.palette.warning.main}`}}})()})),te={pending:"Pending",processing:"Processing",completed:"Completed",failed:"Failed",cancelled:"Cancelled",refunded:"Refunded",partially_refunded:"Partial Refund",expired:"Expired"},tt={pending:e8,processing:B.Z,completed:V.Z,failed:e5,cancelled:e0.Z,refunded:e3,partially_refunded:e6,expired:e7},tr=({status:e,showIcon:t=!1,"data-testid":r,...n})=>{let s=te[e]||e,o=tt[e],i=t&&o?{icon:a.jsx(o,{})}:{};return a.jsx(e9,{label:s,paymentStatus:e,size:"small","data-testid":r||`payment-status-chip-${e}`,...i,...n})},ta=(0,v.ZP)(C.Z,{shouldForwardProp:e=>"amountSize"!==e&&"colorVariant"!==e})(({theme:e,amountSize:t,colorVariant:r})=>({fontFamily:"monospace",letterSpacing:"0.05em",...(()=>{switch(t){case"small":return{fontSize:"0.875rem",fontWeight:500};case"medium":default:return{fontSize:"1rem",fontWeight:600};case"large":return{fontSize:"1.25rem",fontWeight:700}}})(),...(()=>{switch(r){case"success":return{color:e.palette.success.main};case"error":return{color:e.palette.error.main};case"warning":return{color:e.palette.warning.main};case"info":return{color:e.palette.info.main};case"muted":return{color:e.palette.text.secondary};default:return{color:e.palette.text.primary}}})()})),tn=(e,t="PKR",r=2)=>new Intl.NumberFormat("PKR"===t?"en-PK":"en-US",{style:"currency",currency:t,minimumFractionDigits:r,maximumFractionDigits:r}).format(e),ts=({amount:e,currency:t="PKR",size:r="medium",colorVariant:n="default",showSign:s=!1,precision:o=2,"data-testid":i,...l})=>{let c=tn(e,t,o),d=s&&e>0?`+${c}`:c;return a.jsx(ta,{amountSize:r,colorVariant:n,"data-testid":i||"amount-display",...l,children:d})},to=[{id:"id",label:"Payment ID",sortable:!0,width:"120px",render:e=>(0,a.jsxs)(C.Z,{variant:"body2",fontFamily:"monospace",children:[e.id.slice(0,8),"..."]})},{id:"subscriptionId",label:"Subscription",sortable:!0,width:"120px",render:e=>(0,a.jsxs)(C.Z,{variant:"body2",fontFamily:"monospace",children:[e.subscriptionId.slice(0,8),"..."]})},{id:"amount",label:"Amount",sortable:!0,width:"120px",align:"right",render:e=>a.jsx(ts,{amount:e.amount,currency:e.currency,size:"small",colorVariant:"completed"===e.status?"success":"default"})},{id:"status",label:"Status",sortable:!0,width:"120px",align:"center",render:e=>a.jsx(tr,{status:e.status,showIcon:!0})},{id:"paymentMethod",label:"Method",sortable:!0,width:"120px",render:e=>a.jsx(q.Z,{label:e.paymentMethod.replace("_"," ").toUpperCase(),size:"small",variant:"outlined"})},{id:"paymentType",label:"Type",sortable:!0,width:"100px",render:e=>a.jsx(q.Z,{label:e.paymentType.toUpperCase(),size:"small",variant:"outlined",color:"primary"})},{id:"createdAt",label:"Created",sortable:!0,width:"140px",render:e=>a.jsx(C.Z,{variant:"body2",children:new Date(e.createdAt).toLocaleDateString()})},{id:"processedAt",label:"Processed",sortable:!0,width:"140px",render:e=>a.jsx(C.Z,{variant:"body2",children:e.processedAt?new Date(e.processedAt).toLocaleDateString():"-"})}],ti=({payments:e,loading:t=!1,selectable:r=!1,selectedPayments:s=[],onSelectionChange:o,onPaymentAction:i,onSort:l,sortField:c,sortDirection:d="asc","data-testid":u})=>{let[p,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(null),y=(e,t)=>{m(e.currentTarget),g(t)},x=()=>{m(null),g(null)},f=e=>{h&&i&&i(h,e),x()},b=e=>{o&&(s.includes(e)?o(s.filter(t=>t!==e)):o([...s,e]))},v=e=>{l&&l(e,c===e&&"asc"===d?"desc":"asc")},Z=e=>{let t=["view","history"];return"pending"===e.status?t.push("edit","process","fail"):"completed"===e.status?t.push("refund"):"failed"===e.status&&t.push("edit"),t.push("delete"),t},P=(0,n.useMemo)(()=>{if(!h)return[];let t=e.find(e=>e.id===h);if(!t)return[];let r=Z(t);return[{action:"view",label:"View Details",icon:a.jsx(eY,{})},{action:"edit",label:"Edit Payment",icon:a.jsx(eQ.Z,{})},{action:"process",label:"Process Payment",icon:a.jsx(V.Z,{})},{action:"fail",label:"Mark as Failed",icon:a.jsx(e0.Z,{})},{action:"refund",label:"Refund Payment",icon:a.jsx(B.Z,{})},{action:"history",label:"View History",icon:a.jsx(e1,{})},{action:"delete",label:"Delete Payment",icon:a.jsx(e2.Z,{})}].filter(e=>r.includes(e.action))},[h,e]),j=r&&e.length>0&&s.length===e.length,k=r&&s.length>0&&s.length<e.length;return t?a.jsx(w.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:a.jsx(H.Z,{})}):(0,a.jsxs)(G.Z,{component:X.Z,"data-testid":u,children:[(0,a.jsxs)(K.Z,{size:"small",stickyHeader:!0,children:[a.jsx(J.Z,{children:(0,a.jsxs)(Y.Z,{children:[r&&a.jsx(Q.Z,{padding:"checkbox",children:a.jsx(eg,{checked:j,indeterminate:k,onChange:t=>{o&&(t.target.checked?o(e.map(e=>e.id)):o([]))}})}),to.map(e=>a.jsx(Q.Z,{align:e.align||"left",style:{width:e.width},children:e.sortable?a.jsx(eC,{active:c===e.id,direction:c===e.id?d:"asc",onClick:()=>v(e.id),children:e.label}):e.label},e.id)),a.jsx(Q.Z,{align:"center",width:"60px",children:"Actions"})]})}),a.jsx(ej.Z,{children:0===e.length?a.jsx(Y.Z,{children:a.jsx(Q.Z,{colSpan:to.length+(r?1:0)+1,align:"center",sx:{py:4},children:a.jsx(C.Z,{variant:"body2",color:"text.secondary",children:"No payments found"})})}):e.map(e=>(0,a.jsxs)(Y.Z,{hover:!0,selected:s.includes(e.id),children:[r&&a.jsx(Q.Z,{padding:"checkbox",children:a.jsx(eg,{checked:s.includes(e.id),onChange:()=>b(e.id)})}),to.map(t=>a.jsx(Q.Z,{align:t.align||"left",children:t.render?t.render(e):String(e[t.id]||"")},t.id)),a.jsx(Q.Z,{align:"center",children:a.jsx(eX,{title:"More actions",children:a.jsx(eK.Z,{size:"small",onClick:t=>y(t,e.id),children:a.jsx(e4.Z,{})})})})]},e.id))})]}),a.jsx(eJ.Z,{anchorEl:p,open:!!p,onClose:x,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:P.map(e=>a.jsx(E.Z,{onClick:()=>f(e.action),children:(0,a.jsxs)(w.Z,{display:"flex",alignItems:"center",gap:1,children:[e.icon,e.label]})},e.action))})]})};var tl=r(81987),tc=r(88820),td=r(78029);function tu(e){return(0,l.ZP)("MuiCollapse",e)}(0,eo.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);let tp=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],tm=e=>{let{orientation:t,classes:r}=e,a={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,c.Z)(a,tu,r)},th=(0,v.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden]}})(({theme:e,ownerState:t})=>(0,o.Z)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===t.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===t.state&&(0,o.Z)({height:"auto",overflow:"visible"},"horizontal"===t.orientation&&{width:"auto"}),"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&{visibility:"hidden"})),tg=(0,v.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>(0,o.Z)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})),ty=(0,v.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>(0,o.Z)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"})),tx=n.forwardRef(function(e,t){let r=(0,Z.i)({props:e,name:"MuiCollapse"}),{addEndListener:l,children:c,className:d,collapsedSize:u="0px",component:p,easing:m,in:h,onEnter:g,onEntered:y,onEntering:x,onExit:f,onExited:b,onExiting:v,orientation:P="vertical",style:w,timeout:C=tc.x9.standard,TransitionComponent:j=tl.ZP}=r,k=(0,s.Z)(r,tp),S=(0,o.Z)({},r,{orientation:P,collapsedSize:u}),M=tm(S),R=(0,eI.Z)(),I=(0,ek.Z)(),D=n.useRef(null),F=n.useRef(),A="number"==typeof u?`${u}px`:u,L="horizontal"===P,z=L?"width":"height",T=n.useRef(null),$=(0,eL.Z)(t,T),E=e=>t=>{if(e){let r=T.current;void 0===t?e(r):e(r,t)}},W=()=>D.current?D.current[L?"clientWidth":"clientHeight"]:0,N=E((e,t)=>{D.current&&L&&(D.current.style.position="absolute"),e.style[z]=A,g&&g(e,t)}),U=E((e,t)=>{let r=W();D.current&&L&&(D.current.style.position="");let{duration:a,easing:n}=(0,td.C)({style:w,timeout:C,easing:m},{mode:"enter"});if("auto"===C){let t=R.transitions.getAutoHeightDuration(r);e.style.transitionDuration=`${t}ms`,F.current=t}else e.style.transitionDuration="string"==typeof a?a:`${a}ms`;e.style[z]=`${r}px`,e.style.transitionTimingFunction=n,x&&x(e,t)}),_=E((e,t)=>{e.style[z]="auto",y&&y(e,t)}),O=E(e=>{e.style[z]=`${W()}px`,f&&f(e)}),B=E(b),V=E(e=>{let t=W(),{duration:r,easing:a}=(0,td.C)({style:w,timeout:C,easing:m},{mode:"exit"});if("auto"===C){let r=R.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${r}ms`,F.current=r}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[z]=A,e.style.transitionTimingFunction=a,v&&v(e)});return(0,a.jsx)(j,(0,o.Z)({in:h,onEnter:N,onEntered:_,onEntering:U,onExit:O,onExited:B,onExiting:V,addEndListener:e=>{"auto"===C&&I.start(F.current||0,e),l&&l(T.current,e)},nodeRef:T,timeout:"auto"===C?null:C},k,{children:(e,t)=>(0,a.jsx)(th,(0,o.Z)({as:p,className:(0,i.Z)(M.root,d,{entered:M.entered,exited:!h&&"0px"===A&&M.hidden}[e]),style:(0,o.Z)({[L?"minWidth":"minHeight"]:A},w),ref:$},t,{ownerState:(0,o.Z)({},S,{state:e}),children:(0,a.jsx)(tg,{ownerState:(0,o.Z)({},S,{state:e}),className:M.wrapper,ref:D,children:(0,a.jsx)(ty,{ownerState:(0,o.Z)({},S,{state:e}),className:M.wrapperInner,children:c})})}))}))});tx.muiSupportAuto=!0;let tf=n.createContext({});var tb=r(31121);function tv(e){return(0,l.ZP)("MuiAccordion",e)}let tZ=(0,eo.Z)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),tP=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],tw=e=>{let{classes:t,square:r,expanded:a,disabled:n,disableGutters:s}=e;return(0,c.Z)({root:["root",!r&&"rounded",a&&"expanded",n&&"disabled",!s&&"gutters"],region:["region"]},tv,t)},tC=(0,v.ZP)(X.Z,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${tZ.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${tZ.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${tZ.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${tZ.expanded}`]:{margin:"16px 0"}}}]})),tj=n.forwardRef(function(e,t){let r=(0,Z.i)({props:e,name:"MuiAccordion"}),{children:l,className:c,defaultExpanded:d=!1,disabled:u=!1,disableGutters:p=!1,expanded:m,onChange:h,square:g=!1,slots:y={},slotProps:x={},TransitionComponent:f,TransitionProps:b}=r,v=(0,s.Z)(r,tP),[P,w]=(0,e$.Z)({controlled:m,default:d,name:"Accordion",state:"expanded"}),C=n.useCallback(e=>{w(!P),h&&h(e,!P)},[P,h,w]),[j,...k]=n.Children.toArray(l),S=n.useMemo(()=>({expanded:P,disabled:u,disableGutters:p,toggle:C}),[P,u,p,C]),M=(0,o.Z)({},r,{square:g,disabled:u,disableGutters:p,expanded:P}),R=tw(M),I=(0,o.Z)({transition:f},y),D=(0,o.Z)({transition:b},x),[F,A]=(0,tb.Z)("transition",{elementType:tx,externalForwardedProps:{slots:I,slotProps:D},ownerState:M});return(0,a.jsxs)(tC,(0,o.Z)({className:(0,i.Z)(R.root,c),ref:t,ownerState:M,square:g},v,{children:[(0,a.jsx)(tf.Provider,{value:S,children:j}),(0,a.jsx)(F,(0,o.Z)({in:P,timeout:"auto"},A,{children:(0,a.jsx)("div",{"aria-labelledby":j.props.id,id:j.props["aria-controls"],role:"region",className:R.region,children:k})}))]}))});function tk(e){return(0,l.ZP)("MuiAccordionSummary",e)}let tS=(0,eo.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),tM=["children","className","expandIcon","focusVisibleClassName","onClick"],tR=e=>{let{classes:t,expanded:r,disabled:a,disableGutters:n}=e;return(0,c.Z)({root:["root",r&&"expanded",a&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},tk,t)},tI=(0,v.ZP)(ey.Z,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${tS.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${tS.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${tS.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${tS.expanded}`]:{minHeight:64}}}]}}),tD=(0,v.ZP)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${tS.expanded}`]:{margin:"20px 0"}}}]})),tF=(0,v.ZP)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${tS.expanded}`]:{transform:"rotate(180deg)"}})),tA=n.forwardRef(function(e,t){let r=(0,Z.i)({props:e,name:"MuiAccordionSummary"}),{children:l,className:c,expandIcon:d,focusVisibleClassName:u,onClick:p}=r,m=(0,s.Z)(r,tM),{disabled:h=!1,disableGutters:g,expanded:y,toggle:x}=n.useContext(tf),f=(0,o.Z)({},r,{expanded:y,disabled:h,disableGutters:g}),b=tR(f);return(0,a.jsxs)(tI,(0,o.Z)({focusRipple:!1,disableRipple:!0,disabled:h,component:"div","aria-expanded":y,className:(0,i.Z)(b.root,c),focusVisibleClassName:(0,i.Z)(b.focusVisible,u),onClick:e=>{x&&x(e),p&&p(e)},ref:t,ownerState:f},m,{children:[(0,a.jsx)(tD,{className:b.content,ownerState:f,children:l}),d&&(0,a.jsx)(tF,{className:b.expandIconWrapper,ownerState:f,children:d})]}))});function tL(e){return(0,l.ZP)("MuiAccordionDetails",e)}(0,eo.Z)("MuiAccordionDetails",["root"]);let tz=["className"],tT=e=>{let{classes:t}=e;return(0,c.Z)({root:["root"]},tL,t)},t$=(0,v.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),tE=n.forwardRef(function(e,t){let r=(0,Z.i)({props:e,name:"MuiAccordionDetails"}),{className:n}=r,l=(0,s.Z)(r,tz),c=tT(r);return(0,a.jsx)(t$,(0,o.Z)({className:(0,i.Z)(c.root,n),ref:t,ownerState:r},l))}),tW=(0,_.Z)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var tN=r(80751);let tU=(0,_.Z)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");var t_=r(71718),tO=r(54472),tB=r(35139);let tV=[{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"},{value:"cancelled",label:"Cancelled"},{value:"refunded",label:"Refunded"},{value:"partially_refunded",label:"Partially Refunded"},{value:"expired",label:"Expired"}],tq=[{value:"manual",label:"Manual"},{value:"bank_transfer",label:"Bank Transfer"},{value:"credit_card",label:"Credit Card"},{value:"debit_card",label:"Debit Card"},{value:"paypal",label:"PayPal"},{value:"stripe",label:"Stripe"},{value:"cash",label:"Cash"},{value:"check",label:"Check"},{value:"wire_transfer",label:"Wire Transfer"},{value:"cryptocurrency",label:"Cryptocurrency"},{value:"other",label:"Other"}],tH=[{value:"subscription",label:"Subscription"},{value:"renewal",label:"Renewal"},{value:"upgrade",label:"Upgrade"},{value:"refund",label:"Refund"}],tG=({filters:e,onFiltersChange:t,onClearFilters:r,loading:s=!1,"data-testid":o})=>{let[i,l]=(0,n.useState)(!1),c=(0,n.useCallback)((r,a)=>{t({...e,[r]:a})},[e,t]),d=(0,n.useCallback)((t,r)=>{let a=e[t]||[],n=a.includes(r)?a.filter(e=>e!==r):[...a,r];c(t,n.length>0?n:void 0)},[e,c]),u=(0,n.useCallback)(()=>{let t=0;return e.status?.length&&t++,e.paymentMethod?.length&&t++,e.paymentType?.length&&t++,e.subscriptionId&&t++,e.adminUserId&&t++,e.startDate&&t++,e.endDate&&t++,void 0!==e.minAmount&&t++,void 0!==e.maxAmount&&t++,e.currency&&t++,t},[e])();return a.jsx(tO._,{dateAdapter:tB.H,children:a.jsx(S.Z,{"data-testid":o,children:(0,a.jsxs)(tj,{expanded:i,onChange:(e,t)=>l(t),children:[a.jsx(tA,{expandIcon:a.jsx(tW,{}),children:(0,a.jsxs)(w.Z,{display:"flex",alignItems:"center",gap:1,width:"100%",children:[a.jsx(tN.Z,{}),a.jsx(C.Z,{variant:"h6",children:"Filters"}),u>0&&a.jsx(q.Z,{label:`${u} active`,size:"small",color:"primary",variant:"outlined"}),a.jsx(w.Z,{flexGrow:1}),u>0&&a.jsx(I.Z,{size:"small",startIcon:a.jsx(tU,{}),onClick:e=>{e.stopPropagation(),r()},disabled:s,children:"Clear All"})]})}),a.jsx(tE,{children:(0,a.jsxs)(k.ZP,{container:!0,spacing:3,children:[(0,a.jsxs)(k.ZP,{item:!0,xs:12,md:6,lg:4,children:[a.jsx(C.Z,{variant:"subtitle2",gutterBottom:!0,children:"Status"}),a.jsx(R.Z,{direction:"row",flexWrap:"wrap",gap:1,children:tV.map(t=>a.jsx(q.Z,{label:t.label,clickable:!0,variant:e.status?.includes(t.value)?"filled":"outlined",color:e.status?.includes(t.value)?"primary":"default",onClick:()=>d("status",t.value),size:"small"},t.value))})]}),(0,a.jsxs)(k.ZP,{item:!0,xs:12,md:6,lg:4,children:[a.jsx(C.Z,{variant:"subtitle2",gutterBottom:!0,children:"Payment Method"}),a.jsx(R.Z,{direction:"row",flexWrap:"wrap",gap:1,children:tq.slice(0,6).map(t=>a.jsx(q.Z,{label:t.label,clickable:!0,variant:e.paymentMethod?.includes(t.value)?"filled":"outlined",color:e.paymentMethod?.includes(t.value)?"primary":"default",onClick:()=>d("paymentMethod",t.value),size:"small"},t.value))})]}),(0,a.jsxs)(k.ZP,{item:!0,xs:12,md:6,lg:4,children:[a.jsx(C.Z,{variant:"subtitle2",gutterBottom:!0,children:"Payment Type"}),a.jsx(R.Z,{direction:"row",flexWrap:"wrap",gap:1,children:tH.map(t=>a.jsx(q.Z,{label:t.label,clickable:!0,variant:e.paymentType?.includes(t.value)?"filled":"outlined",color:e.paymentType?.includes(t.value)?"primary":"default",onClick:()=>d("paymentType",t.value),size:"small"},t.value))})]}),(0,a.jsxs)(k.ZP,{item:!0,xs:12,md:6,children:[a.jsx(C.Z,{variant:"subtitle2",gutterBottom:!0,children:"Date Range"}),(0,a.jsxs)(R.Z,{direction:"row",spacing:2,children:[a.jsx(t_.M,{label:"Start Date",value:e.startDate||null,onChange:e=>c("startDate",e),slotProps:{textField:{size:"small",fullWidth:!0}}}),a.jsx(t_.M,{label:"End Date",value:e.endDate||null,onChange:e=>c("endDate",e),slotProps:{textField:{size:"small",fullWidth:!0}}})]})]}),(0,a.jsxs)(k.ZP,{item:!0,xs:12,md:6,children:[a.jsx(C.Z,{variant:"subtitle2",gutterBottom:!0,children:"Amount Range"}),(0,a.jsxs)(R.Z,{direction:"row",spacing:2,children:[a.jsx(L.Z,{label:"Min Amount",type:"number",size:"small",value:e.minAmount||"",onChange:e=>c("minAmount",e.target.value?Number(e.target.value):void 0),fullWidth:!0}),a.jsx(L.Z,{label:"Max Amount",type:"number",size:"small",value:e.maxAmount||"",onChange:e=>c("maxAmount",e.target.value?Number(e.target.value):void 0),fullWidth:!0})]})]}),(0,a.jsxs)(k.ZP,{item:!0,xs:12,md:6,children:[a.jsx(C.Z,{variant:"subtitle2",gutterBottom:!0,children:"Search"}),(0,a.jsxs)(R.Z,{spacing:2,children:[a.jsx(L.Z,{label:"Subscription ID",size:"small",value:e.subscriptionId||"",onChange:e=>c("subscriptionId",e.target.value||void 0),placeholder:"Enter subscription ID...",fullWidth:!0}),a.jsx(L.Z,{label:"Admin User ID",size:"small",value:e.adminUserId||"",onChange:e=>c("adminUserId",e.target.value||void 0),placeholder:"Enter admin user ID...",fullWidth:!0})]})]}),(0,a.jsxs)(k.ZP,{item:!0,xs:12,md:6,children:[a.jsx(C.Z,{variant:"subtitle2",gutterBottom:!0,children:"Currency"}),(0,a.jsxs)(z.Z,{size:"small",fullWidth:!0,children:[a.jsx(T.Z,{children:"Currency"}),(0,a.jsxs)($.Z,{value:e.currency||"",label:"Currency",onChange:e=>c("currency",e.target.value||void 0),children:[a.jsx(E.Z,{value:"",children:"All Currencies"}),a.jsx(E.Z,{value:"USD",children:"USD"}),a.jsx(E.Z,{value:"EUR",children:"EUR"}),a.jsx(E.Z,{value:"GBP",children:"GBP"}),a.jsx(E.Z,{value:"CAD",children:"CAD"}),a.jsx(E.Z,{value:"AUD",children:"AUD"})]})]})]})]})})]})})})};r(74131),r(24493),r(54640);var tX=r(51471);class tK{async createPayment(e){return tX.x.post("/api/v1/payments",e)}async getPayment(e){return tX.x.get(`/api/v1/payments/${e}`)}async searchPayments(e,t,r){let a={...e,limit:t,offset:r};return tX.x.post("/api/v1/payments/search",a)}async getSubscriptionPayments(e,t,r){let a=new URLSearchParams;return t&&a.append("limit",t.toString()),r&&a.append("offset",r.toString()),tX.x.get(`/api/v1/payments/subscription/${e}?${a.toString()}`)}async getPendingPayments(e,t){let r=new URLSearchParams;return e&&r.append("limit",e.toString()),t&&r.append("offset",t.toString()),tX.x.get(`/api/v1/payments/pending?${r.toString()}`)}async getFailedPayments(e,t){let r=new URLSearchParams;return e&&r.append("limit",e.toString()),t&&r.append("offset",t.toString()),tX.x.get(`/api/v1/payments/failed?${r.toString()}`)}async processPayment(e,t){return tX.x.post(`/api/v1/payments/${e}/process`,t)}async failPayment(e,t){return tX.x.post(`/api/v1/payments/${e}/fail`,t)}async refundPayment(e,t){return tX.x.post(`/api/v1/payments/${e}/refund`,t)}async addPaymentNote(e,t){return tX.x.post(`/api/v1/payments/${e}/notes`,t)}async bulkPaymentAction(e){return tX.x.post("/api/v1/payments/bulk-action",e)}async getPaymentAnalytics(e,t){let r=new URLSearchParams;return e&&r.append("start_date",e.toISOString()),t&&r.append("end_date",t.toISOString()),tX.x.get(`/api/v1/payments/analytics?${r.toString()}`)}async getRevenueByPeriod(e,t,r){let a=new URLSearchParams;return a.append("period",e),t&&a.append("start_date",t.toISOString()),r&&a.append("end_date",r.toISOString()),tX.x.get(`/api/v1/payments/analytics/revenue?${a.toString()}`)}async getPaymentMethodStats(){return tX.x.get("/api/v1/payments/analytics/methods")}async getPaymentHistory(e,t,r){let a=new URLSearchParams;return t&&a.append("limit",t.toString()),r&&a.append("offset",r.toString()),tX.x.get(`/api/v1/payments/${e}/history?${a.toString()}`)}async getAdminActivity(e,t,r,a,n){let s=new URLSearchParams;return t&&s.append("start_date",t.toISOString()),r&&s.append("end_date",r.toISOString()),a&&s.append("limit",a.toString()),n&&s.append("offset",n.toString()),tX.x.get(`/api/v1/payments/admin/${e}/activity?${s.toString()}`)}getPaymentStatusSummary(e){let t={total:e.length,byStatus:{},byMethod:{},totalAmount:0,completedAmount:0};return e.forEach(e=>{t.byStatus[e.status]=(t.byStatus[e.status]||0)+1,t.byMethod[e.paymentMethod]=(t.byMethod[e.paymentMethod]||0)+1,t.totalAmount+=e.amount,"completed"===e.status&&(t.completedAmount+=e.amount)}),t}formatAmount(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}getStatusColor(e){return({pending:"#fbbf24",processing:"#3b82f6",completed:"#10b981",failed:"#ef4444",cancelled:"#6b7280",refunded:"#8b5cf6",partially_refunded:"#f59e0b",expired:"#9ca3af"})[e]||"#6b7280"}getMethodDisplayName(e){return({manual:"Manual",bank_transfer:"Bank Transfer",credit_card:"Credit Card",debit_card:"Debit Card",paypal:"PayPal",stripe:"Stripe",cash:"Cash",check:"Check",wire_transfer:"Wire Transfer",cryptocurrency:"Cryptocurrency",other:"Other"})[e]||e}getTypeDisplayName(e){return({subscription:"Subscription",renewal:"Renewal",upgrade:"Upgrade",refund:"Refund"})[e]||e}canProcessPayment(e){return"pending"===e.status||"failed"===e.status}canRefundPayment(e){return"completed"===e.status&&"refund"!==e.paymentType}canFailPayment(e){return"pending"===e.status||"processing"===e.status}validatePaymentForm(e){let t=[];return e.subscriptionId||t.push("Subscription ID is required"),(!e.amount||e.amount<=0)&&t.push("Amount must be greater than 0"),e.currency&&3===e.currency.length||t.push("Valid currency code is required"),e.paymentMethod||t.push("Payment method is required"),e.paymentType||t.push("Payment type is required"),{isValid:0===t.length,errors:t}}calculatePaymentStats(e){let t=e.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0),r=e.length>0?e.reduce((e,t)=>e+t.amount,0)/e.length:0,a=e.filter(e=>"completed"===e.status).length,n=e.length>0?a/e.length*100:0;return{totalRevenue:t,averageAmount:r,successRate:n,pendingCount:e.filter(e=>"pending"===e.status).length,failedCount:e.filter(e=>"failed"===e.status).length,refundedCount:e.filter(e=>"refunded"===e.status).length}}filterPaymentsByDate(e,t,r){return e.filter(e=>{let a=new Date(e.createdAt);return a>=t&&a<=r})}groupPaymentsByPeriod(e,t){let r={};return e.forEach(e=>{let a;let n=new Date(e.createdAt);switch(t){case"day":default:a=n.toISOString().split("T")[0];break;case"week":let s=new Date(n);s.setDate(n.getDate()-n.getDay()),a=s.toISOString().split("T")[0];break;case"month":a=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;break;case"year":a=n.getFullYear().toString()}r[a]||(r[a]=[]),r[a].push(e)}),r}exportPaymentsToCSV(e){return[["ID","Subscription ID","Amount","Currency","Payment Method","Payment Type","Status","Reference ID","Description","Created At","Processed At","Admin User ID"],...e.map(e=>[e.id,e.subscriptionId,e.amount.toString(),e.currency,this.getMethodDisplayName(e.paymentMethod),this.getTypeDisplayName(e.paymentType),e.status,e.referenceId||"",e.description||"",new Date(e.createdAt).toISOString(),e.processedAt?new Date(e.processedAt).toISOString():"",e.adminUserId||""])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")}downloadPaymentsCSV(e,t="payments.csv"){let r=new Blob([this.exportPaymentsToCSV(e)],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){let e=URL.createObjectURL(r);a.setAttribute("href",e),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}}let tJ=new tK,tY=e=>{let t=(0,n.useRef)(tJ).current,[r,a]=(0,n.useState)({payments:[],selectedPayment:null,totalCount:0,currentPage:1,pageSize:10,filters:e||{},analytics:null,stats:null,isLoading:!1,isFetching:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,isProcessing:!1,error:null,hasMore:!1}),s=(0,n.useCallback)(async(e=1,n=!1)=>{let s=1===e?"isLoading":"isFetching";a(e=>({...e,[s]:!0,error:null,...n&&{payments:[],currentPage:1}}));try{let o=await t.searchPayments(r.filters,e,r.pageSize);if(o.success&&o.data){let t=o.data,i=1===e||n?t.payments:[...r.payments,...t.payments],l=e<Math.ceil(t.total/(t.limit||10));a(r=>({...r,payments:i,totalCount:t.total,currentPage:e,hasMore:l,[s]:!1,error:null}))}else a(e=>({...e,[s]:!1,error:o.error||"Failed to fetch payments"}))}catch(e){a(t=>({...t,[s]:!1,error:e instanceof Error?e.message:"Failed to fetch payments"}))}},[tJ,r.filters,r.pageSize,r.payments]),o=(0,n.useCallback)(async()=>{r.hasMore&&!r.isFetching&&await s(r.currentPage+1)},[s,r.hasMore,r.isFetching,r.currentPage]),i=(0,n.useCallback)(async()=>{await s(1,!0)},[s]),l=(0,n.useCallback)(async e=>{try{let r=await t.getPayment(e);if(r.success&&r.data)return{success:!0,data:r.data};return{success:!1,error:r.error||"Failed to fetch payment"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to fetch payment"}}},[tJ]),c=(0,n.useCallback)(async e=>{a(e=>({...e,isCreating:!0,error:null}));try{let r=await t.createPayment(e);if(r.success&&r.data)return a(e=>({...e,payments:[r.data,...e.payments],totalCount:e.totalCount+1,isCreating:!1,error:null})),{success:!0,data:r.data};return a(e=>({...e,isCreating:!1,error:r.error||"Failed to create payment"})),{success:!1,error:r.error||"Failed to create payment"}}catch(t){let e=t instanceof Error?t.message:"Failed to create payment";return a(t=>({...t,isCreating:!1,error:e})),{success:!1,error:e}}},[tJ]),d=(0,n.useCallback)(async(e,r)=>{a(e=>({...e,isUpdating:!0,error:null}));try{let n=await t.updatePayment(e,r);if(n.success&&n.data)return a(t=>({...t,payments:t.payments.map(t=>t.id===e?n.data:t),selectedPayment:t.selectedPayment?.id===e?n.data:t.selectedPayment,isUpdating:!1,error:null})),{success:!0,data:n.data};return a(e=>({...e,isUpdating:!1,error:n.error||"Failed to update payment"})),{success:!1,error:n.error||"Failed to update payment"}}catch(t){let e=t instanceof Error?t.message:"Failed to update payment";return a(t=>({...t,isUpdating:!1,error:e})),{success:!1,error:e}}},[tJ]),u=(0,n.useCallback)(async e=>{a(e=>({...e,isDeleting:!0,error:null}));try{let r=await t.deletePayment(e);if(r.success)return a(t=>({...t,payments:t.payments.filter(t=>t.id!==e),selectedPayment:t.selectedPayment?.id===e?null:t.selectedPayment,totalCount:t.totalCount-1,isDeleting:!1,error:null})),{success:!0};return a(e=>({...e,isDeleting:!1,error:r.error||"Failed to delete payment"})),{success:!1,error:r.error||"Failed to delete payment"}}catch(t){let e=t instanceof Error?t.message:"Failed to delete payment";return a(t=>({...t,isDeleting:!1,error:e})),{success:!1,error:e}}},[tJ]),p=(0,n.useCallback)(async(e,r)=>{a(e=>({...e,isProcessing:!0,error:null}));try{let n=await t.processPayment(e,r);if(n.success&&n.data)return a(t=>({...t,payments:t.payments.map(t=>t.id===e?n.data:t),selectedPayment:t.selectedPayment?.id===e?n.data:t.selectedPayment,isProcessing:!1,error:null})),{success:!0,data:n.data};return a(e=>({...e,isProcessing:!1,error:n.error||"Failed to process payment"})),{success:!1,error:n.error||"Failed to process payment"}}catch(t){let e=t instanceof Error?t.message:"Failed to process payment";return a(t=>({...t,isProcessing:!1,error:e})),{success:!1,error:e}}},[tJ]),m=(0,n.useCallback)(async(e,r)=>{a(e=>({...e,isProcessing:!0,error:null}));try{let n=await t.failPayment(e,r);if(n.success&&n.data)return a(t=>({...t,payments:t.payments.map(t=>t.id===e?n.data:t),selectedPayment:t.selectedPayment?.id===e?n.data:t.selectedPayment,isProcessing:!1,error:null})),{success:!0,data:n.data};return a(e=>({...e,isProcessing:!1,error:n.error||"Failed to fail payment"})),{success:!1,error:n.error||"Failed to fail payment"}}catch(t){let e=t instanceof Error?t.message:"Failed to fail payment";return a(t=>({...t,isProcessing:!1,error:e})),{success:!1,error:e}}},[tJ]),h=(0,n.useCallback)(async(e,r,n)=>{a(e=>({...e,isProcessing:!0,error:null}));try{let s=await t.refundPayment(e,r,n);if(s.success&&s.data)return a(t=>({...t,payments:t.payments.map(t=>t.id===e?s.data:t),selectedPayment:t.selectedPayment?.id===e?s.data:t.selectedPayment,isProcessing:!1,error:null})),{success:!0,data:s.data};return a(e=>({...e,isProcessing:!1,error:s.error||"Failed to refund payment"})),{success:!1,error:s.error||"Failed to refund payment"}}catch(t){let e=t instanceof Error?t.message:"Failed to refund payment";return a(t=>({...t,isProcessing:!1,error:e})),{success:!1,error:e}}},[tJ]),g=(0,n.useCallback)(async(e,r)=>{a(e=>({...e,isUpdating:!0,error:null}));try{let n=await t.bulkUpdatePayments(e,r);if(n.success)return await s(1,!0),a(e=>({...e,isUpdating:!1,error:null})),{success:!0,data:n.data};return a(e=>({...e,isUpdating:!1,error:n.error||"Failed to bulk update payments"})),{success:!1,error:n.error||"Failed to bulk update payments"}}catch(t){let e=t instanceof Error?t.message:"Failed to bulk update payments";return a(t=>({...t,isUpdating:!1,error:e})),{success:!1,error:e}}},[tJ,s]),y=(0,n.useCallback)(async e=>{a(e=>({...e,isProcessing:!0,error:null}));try{let r=await t.bulkProcessPayments(e);if(r.success)return await s(1,!0),a(e=>({...e,isProcessing:!1,error:null})),{success:!0,data:r.data};return a(e=>({...e,isProcessing:!1,error:r.error||"Failed to bulk process payments"})),{success:!1,error:r.error||"Failed to bulk process payments"}}catch(t){let e=t instanceof Error?t.message:"Failed to bulk process payments";return a(t=>({...t,isProcessing:!1,error:e})),{success:!1,error:e}}},[tJ,s]),x=(0,n.useCallback)(async(e,r)=>{try{let n=await t.getAnalytics(e,r);if(n.success&&n.data)return a(e=>({...e,analytics:n.data,error:null})),{success:!0,data:n.data};return a(e=>({...e,error:n.error||"Failed to fetch analytics"})),{success:!1,error:n.error||"Failed to fetch analytics"}}catch(t){let e=t instanceof Error?t.message:"Failed to fetch analytics";return a(t=>({...t,error:e})),{success:!1,error:e}}},[tJ]),f=(0,n.useCallback)(async()=>{try{let e=await t.getStats();if(e.success&&e.data)return a(t=>({...t,stats:e.data,error:null})),{success:!0,data:e.data};return a(t=>({...t,error:e.error||"Failed to fetch stats"})),{success:!1,error:e.error||"Failed to fetch stats"}}catch(t){let e=t instanceof Error?t.message:"Failed to fetch stats";return a(t=>({...t,error:e})),{success:!1,error:e}}},[tJ]),b=(0,n.useCallback)(e=>{a(t=>({...t,filters:{...t.filters,...e}}))},[]),v=(0,n.useCallback)(()=>{a(e=>({...e,filters:{}}))},[]),Z=(0,n.useCallback)(e=>{a(t=>({...t,selectedPayment:e}))},[]),P=(0,n.useCallback)(async()=>{try{let e=await t.exportPayments(r.filters);if(e.success)return{success:!0};return a(t=>({...t,error:e.error||"Failed to export payments"})),{success:!1,error:e.error||"Failed to export payments"}}catch(t){let e=t instanceof Error?t.message:"Failed to export payments";return a(t=>({...t,error:e})),{success:!1,error:e}}},[tJ,r.filters]),w=(0,n.useCallback)(()=>{a(e=>({...e,error:null}))},[]);return(0,n.useEffect)(()=>{s(1,!0)},[r.filters]),(0,n.useEffect)(()=>{f()},[f]),{payments:r.payments,selectedPayment:r.selectedPayment,totalCount:r.totalCount,currentPage:r.currentPage,pageSize:r.pageSize,filters:r.filters,analytics:r.analytics,stats:r.stats,isLoading:r.isLoading,isFetching:r.isFetching,isCreating:r.isCreating,isUpdating:r.isUpdating,isDeleting:r.isDeleting,isProcessing:r.isProcessing,error:r.error,hasMore:r.hasMore,fetchPayments:s,loadMore:o,refetch:i,getPayment:l,createPayment:c,updatePayment:d,deletePayment:u,processPayment:p,failPayment:m,refundPayment:h,bulkUpdatePayments:g,bulkProcessPayments:y,fetchAnalytics:x,fetchStats:f,setFilters:b,clearFilters:v,setSelectedPayment:Z,exportPayments:P,clearError:w}};var tQ=r(35342);function t0(){let{payments:e,totalCount:t,isLoading:r,isProcessing:s,error:o,filters:i,stats:l,fetchPayments:c,processPayment:d,failPayment:u,refundPayment:p,createPayment:m,bulkProcessPayments:h,setFilters:g,clearFilters:y,exportPayments:x,clearError:f}=tY(),[b,v]=(0,n.useState)({selectedPayments:[],showCreateDialog:!1,showProcessDialog:!1,showFailDialog:!1,showRefundDialog:!1,processingPaymentId:null,snackbar:{open:!1,message:"",severity:"info"}}),[Z,_]=(0,n.useState)({paymentMethod:tQ.XL.MANUAL,paymentType:tQ.uG.SUBSCRIPTION,currency:"USD"}),[q,H]=(0,n.useState)(""),[G,X]=(0,n.useState)(""),[K,J]=(0,n.useState)(""),Y=(0,n.useCallback)((e,t)=>{v(r=>({...r,snackbar:{open:!0,message:e,severity:t}}))},[]),Q=(0,n.useCallback)(async(e,t)=>{switch(v(t=>({...t,processingPaymentId:e})),t){case"process":v(e=>({...e,showProcessDialog:!0}));break;case"fail":v(e=>({...e,showFailDialog:!0}));break;case"refund":v(e=>({...e,showRefundDialog:!0}));break;case"view":Y("Payment details view - Coming soon","info");break;case"edit":Y("Payment editing - Coming soon","info");break;case"delete":Y("Payment deletion - Coming soon","info");break;case"history":Y("Payment history view - Coming soon","info");break;default:Y(`Unknown action: ${t}`,"warning")}},[Y]),ee=(0,n.useCallback)(async()=>{if(b.processingPaymentId)try{let e=await d(b.processingPaymentId,q);e.success?(Y("Payment processed successfully","success"),v(e=>({...e,showProcessDialog:!1,processingPaymentId:null})),H("")):Y(e.error||"Failed to process payment","error")}catch(e){Y("Failed to process payment","error")}},[b.processingPaymentId,q,d,Y]),et=(0,n.useCallback)(async()=>{if(b.processingPaymentId&&G.trim())try{let e=await u(b.processingPaymentId,G);e.success?(Y("Payment marked as failed","success"),v(e=>({...e,showFailDialog:!1,processingPaymentId:null})),X("")):Y(e.error||"Failed to mark payment as failed","error")}catch(e){Y("Failed to mark payment as failed","error")}},[b.processingPaymentId,G,u,Y]),er=(0,n.useCallback)(async()=>{if(b.processingPaymentId)try{let e=await p(b.processingPaymentId,void 0,K);e.success?(Y("Payment refunded successfully","success"),v(e=>({...e,showRefundDialog:!1,processingPaymentId:null})),J("")):Y(e.error||"Failed to refund payment","error")}catch(e){Y("Failed to refund payment","error")}},[b.processingPaymentId,K,p,Y]),ea=(0,n.useCallback)(async()=>{if(Z.subscriptionId&&Z.amount)try{let e=await m(Z);e.success?(Y("Payment created successfully","success"),v(e=>({...e,showCreateDialog:!1})),_({paymentMethod:tQ.XL.MANUAL,paymentType:tQ.uG.SUBSCRIPTION,currency:"USD"})):Y(e.error||"Failed to create payment","error")}catch(e){Y("Failed to create payment","error")}},[Z,m,Y]),en=(0,n.useCallback)(async()=>{if(0!==b.selectedPayments.length)try{let e=await h(b.selectedPayments);e.success?(Y(`Processed ${e.data?.processed||0} payments`,"success"),v(e=>({...e,selectedPayments:[]}))):Y(e.error||"Failed to process payments","error")}catch(e){Y("Failed to process payments","error")}},[b.selectedPayments,h,Y]),es=(0,n.useCallback)(async()=>{try{let e=await x();e.success?Y("Payments exported successfully","success"):Y(e.error||"Failed to export payments","error")}catch(e){Y("Failed to export payments","error")}},[x,Y]);return(0,a.jsxs)(P,{maxWidth:"xl",sx:{py:3},children:[(0,a.jsxs)(w.Z,{mb:3,children:[a.jsx(C.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"Payment Management"}),a.jsx(C.Z,{variant:"body1",color:"text.secondary",children:"Manage subscription payments, process manual payments, and track payment history"})]}),o&&a.jsx(j.Z,{severity:"error",sx:{mb:3},onClose:f,children:o}),l&&(0,a.jsxs)(k.ZP,{container:!0,spacing:3,sx:{mb:3},children:[a.jsx(k.ZP,{item:!0,xs:12,sm:6,md:3,children:a.jsx(S.Z,{children:(0,a.jsxs)(M.Z,{children:[a.jsx(C.Z,{variant:"h6",color:"primary",children:"Total Payments"}),a.jsx(C.Z,{variant:"h4",children:l.totalPayments})]})})}),a.jsx(k.ZP,{item:!0,xs:12,sm:6,md:3,children:a.jsx(S.Z,{children:(0,a.jsxs)(M.Z,{children:[a.jsx(C.Z,{variant:"h6",color:"success.main",children:"Total Revenue"}),a.jsx(ts,{amount:l.totalRevenue,currency:"USD",size:"large",colorVariant:"success"})]})})}),a.jsx(k.ZP,{item:!0,xs:12,sm:6,md:3,children:a.jsx(S.Z,{children:(0,a.jsxs)(M.Z,{children:[a.jsx(C.Z,{variant:"h6",color:"info.main",children:"Pending Payments"}),a.jsx(C.Z,{variant:"h4",children:l?.statusBreakdown?.pending||0})]})})}),a.jsx(k.ZP,{item:!0,xs:12,sm:6,md:3,children:a.jsx(S.Z,{children:(0,a.jsxs)(M.Z,{children:[a.jsx(C.Z,{variant:"h6",color:"warning.main",children:"Failed Payments"}),a.jsx(C.Z,{variant:"h4",children:l?.statusBreakdown?.failed||0})]})})})]}),a.jsx(S.Z,{sx:{mb:3},children:a.jsx(M.Z,{children:(0,a.jsxs)(R.Z,{direction:"row",spacing:2,alignItems:"center",flexWrap:"wrap",children:[a.jsx(I.Z,{variant:"contained",startIcon:a.jsx(U.Z,{}),onClick:()=>v(e=>({...e,showCreateDialog:!0})),children:"Create Payment"}),a.jsx(I.Z,{variant:"outlined",startIcon:a.jsx(O,{}),onClick:es,disabled:r,children:"Export"}),a.jsx(I.Z,{variant:"outlined",startIcon:a.jsx(B.Z,{}),onClick:()=>c(1,!0),disabled:r,children:"Refresh"}),b.selectedPayments.length>0&&a.jsx(a.Fragment,{children:(0,a.jsxs)(I.Z,{variant:"outlined",startIcon:a.jsx(V.Z,{}),onClick:en,disabled:s,color:"success",children:["Process Selected (",b.selectedPayments.length,")"]})})]})})}),a.jsx(w.Z,{mb:3,children:a.jsx(tG,{filters:i,onFiltersChange:g,onClearFilters:y,loading:r})}),a.jsx(S.Z,{children:a.jsx(ti,{payments:e,loading:r,selectable:!0,selectedPayments:b.selectedPayments,onSelectionChange:e=>v(t=>({...t,selectedPayments:e})),onPaymentAction:Q})}),(0,a.jsxs)(D.Z,{open:b.showCreateDialog,onClose:()=>v(e=>({...e,showCreateDialog:!1})),maxWidth:"sm",fullWidth:!0,children:[a.jsx(F.Z,{children:"Create New Payment"}),a.jsx(A.Z,{children:(0,a.jsxs)(R.Z,{spacing:3,sx:{mt:1},children:[a.jsx(L.Z,{label:"Subscription ID",value:Z.subscriptionId||"",onChange:e=>_(t=>({...t,subscriptionId:e.target.value})),fullWidth:!0,required:!0}),a.jsx(L.Z,{label:"Amount",type:"number",value:Z.amount||"",onChange:e=>_(t=>({...t,amount:Number(e.target.value)})),fullWidth:!0,required:!0}),(0,a.jsxs)(z.Z,{fullWidth:!0,children:[a.jsx(T.Z,{children:"Payment Method"}),(0,a.jsxs)($.Z,{value:Z.paymentMethod||tQ.XL.MANUAL,label:"Payment Method",onChange:e=>_(t=>({...t,paymentMethod:e.target.value})),children:[a.jsx(E.Z,{value:tQ.XL.MANUAL,children:"Manual"}),a.jsx(E.Z,{value:tQ.XL.BANK_TRANSFER,children:"Bank Transfer"}),a.jsx(E.Z,{value:tQ.XL.CREDIT_CARD,children:"Credit Card"}),a.jsx(E.Z,{value:tQ.XL.CASH,children:"Cash"})]})]}),a.jsx(L.Z,{label:"Description",value:Z.description||"",onChange:e=>_(t=>({...t,description:e.target.value})),fullWidth:!0,multiline:!0,rows:2})]})}),(0,a.jsxs)(W.Z,{children:[a.jsx(I.Z,{onClick:()=>v(e=>({...e,showCreateDialog:!1})),children:"Cancel"}),a.jsx(I.Z,{onClick:ea,variant:"contained",disabled:!Z.subscriptionId||!Z.amount,children:"Create Payment"})]})]}),(0,a.jsxs)(D.Z,{open:b.showProcessDialog,onClose:()=>v(e=>({...e,showProcessDialog:!1})),maxWidth:"sm",fullWidth:!0,children:[a.jsx(F.Z,{children:"Process Payment"}),a.jsx(A.Z,{children:a.jsx(L.Z,{label:"Processing Notes (Optional)",value:q,onChange:e=>H(e.target.value),fullWidth:!0,multiline:!0,rows:3,sx:{mt:1}})}),(0,a.jsxs)(W.Z,{children:[a.jsx(I.Z,{onClick:()=>v(e=>({...e,showProcessDialog:!1})),children:"Cancel"}),a.jsx(I.Z,{onClick:ee,variant:"contained",color:"success",disabled:s,children:"Process Payment"})]})]}),(0,a.jsxs)(D.Z,{open:b.showFailDialog,onClose:()=>v(e=>({...e,showFailDialog:!1})),maxWidth:"sm",fullWidth:!0,children:[a.jsx(F.Z,{children:"Mark Payment as Failed"}),a.jsx(A.Z,{children:a.jsx(L.Z,{label:"Failure Reason",value:G,onChange:e=>X(e.target.value),fullWidth:!0,multiline:!0,rows:3,required:!0,sx:{mt:1}})}),(0,a.jsxs)(W.Z,{children:[a.jsx(I.Z,{onClick:()=>v(e=>({...e,showFailDialog:!1})),children:"Cancel"}),a.jsx(I.Z,{onClick:et,variant:"contained",color:"error",disabled:s||!G.trim(),children:"Mark as Failed"})]})]}),(0,a.jsxs)(D.Z,{open:b.showRefundDialog,onClose:()=>v(e=>({...e,showRefundDialog:!1})),maxWidth:"sm",fullWidth:!0,children:[a.jsx(F.Z,{children:"Refund Payment"}),a.jsx(A.Z,{children:a.jsx(L.Z,{label:"Refund Reason (Optional)",value:K,onChange:e=>J(e.target.value),fullWidth:!0,multiline:!0,rows:3,sx:{mt:1}})}),(0,a.jsxs)(W.Z,{children:[a.jsx(I.Z,{onClick:()=>v(e=>({...e,showRefundDialog:!1})),children:"Cancel"}),a.jsx(I.Z,{onClick:er,variant:"contained",color:"warning",disabled:s,children:"Process Refund"})]})]}),a.jsx(N.Z,{open:b.snackbar.open,autoHideDuration:6e3,onClose:()=>v(e=>({...e,snackbar:{...e.snackbar,open:!1}})),children:a.jsx(j.Z,{severity:b.snackbar.severity,onClose:()=>v(e=>({...e,snackbar:{...e.snackbar,open:!1}})),children:b.snackbar.message})})]})}},74131:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var a=r(17577),n=r(51471);let s=()=>{let[e,t]=(0,a.useState)({user:null,token:null,isAuthenticated:!1,isLoading:!1,isInitializing:!0,error:null}),r=(0,a.useCallback)(async()=>{try{let e=localStorage.getItem("auth_token"),r=localStorage.getItem("auth_user");if(e&&r){let a=JSON.parse(r);t(t=>({...t,user:a,token:e,isAuthenticated:!0,isInitializing:!1}))}else t(e=>({...e,isInitializing:!1}))}catch(e){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),t(e=>({...e,isInitializing:!1,error:"Authentication verification failed"}))}},[]),s=(0,a.useCallback)(async e=>{t(e=>({...e,isLoading:!0,error:null}));try{let r=await n.x.post("/api/v1/auth/login",e);if(!r.success||!r.data)return t(e=>({...e,isLoading:!1,error:r.error||"Login failed"})),{success:!1,error:r.error||"Login failed"};{let{user:e,token:a}=r.data;return localStorage.setItem("auth_token",a),localStorage.setItem("auth_user",JSON.stringify(e)),t(t=>({...t,user:e,token:a,isAuthenticated:!0,isLoading:!1,error:null})),{success:!0}}}catch(r){let e=r instanceof Error?r.message:"Login failed";return t(t=>({...t,isLoading:!1,error:e})),{success:!1,error:e}}},[]),o=(0,a.useCallback)(async e=>{t(e=>({...e,isLoading:!0,error:null}));try{let r=await n.x.post("/api/v1/auth/register",e);if(!r.success||!r.data)return t(e=>({...e,isLoading:!1,error:r.error||"Registration failed"})),{success:!1,error:r.error||"Registration failed"};{let{user:e,token:a}=r.data;return localStorage.setItem("auth_token",a),localStorage.setItem("auth_user",JSON.stringify(e)),t(t=>({...t,user:e,token:a,isAuthenticated:!0,isLoading:!1,error:null})),{success:!0}}}catch(r){let e=r instanceof Error?r.message:"Registration failed";return t(t=>({...t,isLoading:!1,error:e})),{success:!1,error:e}}},[]),i=(0,a.useCallback)(async()=>{t(e=>({...e,isLoading:!0}));try{await n.x.post("/api/v1/auth/logout")}catch(e){console.warn("Logout API call failed:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),t({user:null,token:null,isAuthenticated:!1,isLoading:!1,isInitializing:!1,error:null})}},[]),l=(0,a.useCallback)(async()=>{try{let e=await n.x.post("/api/v1/auth/refresh");if(!e.success||!e.data)return{success:!1,error:e.error||"Token refresh failed"};{let{token:r}=e.data;return localStorage.setItem("auth_token",r),t(e=>({...e,token:r,error:null})),{success:!0}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Token refresh failed"}}},[]),c=(0,a.useCallback)(()=>{t(e=>({...e,error:null}))},[]),d=(0,a.useCallback)(async e=>{t(e=>({...e,isLoading:!0,error:null}));try{let r=await n.x.patch("/api/v1/auth/profile",e);if(!r.success||!r.data)return t(e=>({...e,isLoading:!1,error:r.error||"Profile update failed"})),{success:!1,error:r.error||"Profile update failed"};{let e=r.data;return localStorage.setItem("auth_user",JSON.stringify(e)),t(t=>({...t,user:e,isLoading:!1,error:null})),{success:!0}}}catch(r){let e=r instanceof Error?r.message:"Profile update failed";return t(t=>({...t,isLoading:!1,error:e})),{success:!1,error:e}}},[]),u=(0,a.useCallback)(async(e,r)=>{t(e=>({...e,isLoading:!0,error:null}));try{let a=await n.x.post("/api/v1/auth/change-password",{currentPassword:e,newPassword:r});if(a.success)return t(e=>({...e,isLoading:!1,error:null})),{success:!0};return t(e=>({...e,isLoading:!1,error:a.error||"Password change failed"})),{success:!1,error:a.error||"Password change failed"}}catch(r){let e=r instanceof Error?r.message:"Password change failed";return t(t=>({...t,isLoading:!1,error:e})),{success:!1,error:e}}},[]),p=(0,a.useCallback)(async e=>{t(e=>({...e,isLoading:!0,error:null}));try{let r=await n.x.post("/api/v1/auth/reset-password",{email:e});if(r.success)return t(e=>({...e,isLoading:!1,error:null})),{success:!0};return t(e=>({...e,isLoading:!1,error:r.error||"Password reset failed"})),{success:!1,error:r.error||"Password reset failed"}}catch(r){let e=r instanceof Error?r.message:"Password reset failed";return t(t=>({...t,isLoading:!1,error:e})),{success:!1,error:e}}},[]),m=(0,a.useCallback)(t=>e.user?.permissions?.includes(t)||!1,[e.user]),h=(0,a.useCallback)(t=>e.user?.role===t,[e.user]);return(0,a.useEffect)(()=>{r()},[r]),{...e,login:s,register:o,logout:i,refreshToken:l,clearError:c,updateProfile:d,changePassword:u,resetPassword:p,checkPermission:m,hasRole:h}}},18102:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/payments/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[762,908,82,861,348,541,27,754,469,282,779,65,498,571],()=>r(733));module.exports=a})();