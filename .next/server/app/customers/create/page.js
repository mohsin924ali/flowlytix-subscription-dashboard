(()=>{var e={};e.id=499,e.ids=[499],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},83066:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>c}),s(70427),s(32039),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["customers",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,70427)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/customers/create/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32039)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/customers/create/page.tsx"],d="/customers/create/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/customers/create/page",pathname:"/customers/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33254:(e,t,s)=>{Promise.resolve().then(s.bind(s,48725))},53551:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(51426),a=s(10326);let i=(0,r.Z)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},10727:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(51426),a=s(10326);let i=(0,r.Z)((0,a.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business")},86168:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(51426),a=s(10326);let i=(0,r.Z)((0,a.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},48725:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(10326),a=s(17577),i=s(35047),n=s(71728),o=s(42265),l=s(30274),c=s(34039),u=s(4766),d=s(9861),m=s(16027),h=s(85560),p=s(99207),x=s(90541),y=s(98139),b=s(53551),j=s(56389),v=s(10727),f=s(86168);let g=(0,s(51426).Z)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var Z=s(90434),w=s(51471);function C(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)({name:"",email:"",company:"",phone:"",address:"",customerType:"business",notes:""}),[C,P]=(0,a.useState)(!1),[q,T]=(0,a.useState)(null),[z,_]=(0,a.useState)(null),[k,S]=(0,a.useState)({}),A=()=>{let e={};return t.name.trim()||(e.name="Customer name is required"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(e.email="Please enter a valid email address"):e.email="Email is required","business"!==t.customerType||t.company.trim()||(e.company="Company name is required for business customers"),t.phone.trim()||(e.phone="Phone number is required"),S(e),0===Object.keys(e).length},E=async s=>{if(s.preventDefault(),A()){P(!0),T(null),_(null);try{let s=await w.x.post("/api/v1/subscription/customers",{name:t.name.trim(),email:t.email.trim().toLowerCase(),company:t.company.trim()||null,phone:t.phone.trim(),address:t.address.trim()||null,metadata:{customer_type:t.customerType,notes:t.notes.trim()||null,created_via:"dashboard",created_at:new Date().toISOString()}});s.success?(_("Customer created successfully!"),setTimeout(()=>{e.push("/customers")},2e3)):T(s.error||"Failed to create customer")}catch(e){console.error("Customer creation failed:",e),T(e instanceof Error?e.message:"An unexpected error occurred")}finally{P(!1)}}},H=e=>t=>{s(s=>({...s,[e]:t.target.value})),k[e]&&S(t=>({...t,[e]:""}))};return(0,r.jsxs)(n.Z,{sx:{p:3,maxWidth:800,mx:"auto"},children:[(0,r.jsxs)(n.Z,{sx:{mb:4},children:[(0,r.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[r.jsx(Z.default,{href:"/customers",style:{textDecoration:"none"},children:r.jsx(o.Z,{variant:"outlined",startIcon:r.jsx(b.Z,{}),sx:{minWidth:"auto"},children:"Back"})}),r.jsx(l.Z,{variant:"h4",component:"h1",sx:{fontWeight:700,color:"#1e293b"},children:"Create New Customer"})]}),r.jsx(l.Z,{variant:"body1",color:"textSecondary",children:"Add a new customer to the Flowlytix subscription system"})]}),r.jsx(c.Z,{elevation:3,children:(0,r.jsxs)(u.Z,{sx:{p:4},children:[z&&r.jsx(d.Z,{severity:"success",sx:{mb:3},children:z}),q&&r.jsx(d.Z,{severity:"error",sx:{mb:3},children:q}),r.jsx("form",{onSubmit:E,children:(0,r.jsxs)(m.ZP,{container:!0,spacing:3,children:[(0,r.jsxs)(m.ZP,{item:!0,xs:12,children:[(0,r.jsxs)(l.Z,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(j.Z,{color:"primary"}),"Customer Type"]}),(0,r.jsxs)(n.Z,{sx:{display:"flex",gap:1,mb:2},children:[r.jsx(h.Z,{label:"Business",clickable:!0,color:"business"===t.customerType?"primary":"default",onClick:()=>s(e=>({...e,customerType:"business"})),icon:r.jsx(v.Z,{})}),r.jsx(h.Z,{label:"Individual",clickable:!0,color:"individual"===t.customerType?"primary":"default",onClick:()=>s(e=>({...e,customerType:"individual"})),icon:r.jsx(j.Z,{})})]}),r.jsx(p.Z,{sx:{my:2}})]}),r.jsx(m.ZP,{item:!0,xs:12,md:6,children:r.jsx(x.Z,{fullWidth:!0,label:"Customer Name",value:t.name,onChange:H("name"),error:!!k.name,helperText:k.name,disabled:C,required:!0})}),r.jsx(m.ZP,{item:!0,xs:12,md:6,children:r.jsx(x.Z,{fullWidth:!0,label:"Email Address",type:"email",value:t.email,onChange:H("email"),error:!!k.email,helperText:k.email,disabled:C,required:!0})}),"business"===t.customerType&&r.jsx(m.ZP,{item:!0,xs:12,children:r.jsx(x.Z,{fullWidth:!0,label:"Company Name",value:t.company,onChange:H("company"),error:!!k.company,helperText:k.company,disabled:C,required:!0})}),r.jsx(m.ZP,{item:!0,xs:12,md:6,children:r.jsx(x.Z,{fullWidth:!0,label:"Phone Number",value:t.phone,onChange:H("phone"),error:!!k.phone,helperText:k.phone,disabled:C,placeholder:"+1-555-123-4567",required:!0})}),r.jsx(m.ZP,{item:!0,xs:12,md:6,children:r.jsx(x.Z,{fullWidth:!0,label:"Address",value:t.address,onChange:H("address"),error:!!k.address,helperText:k.address,disabled:C,placeholder:"123 Main St, City, State 12345"})}),r.jsx(m.ZP,{item:!0,xs:12,children:r.jsx(x.Z,{fullWidth:!0,label:"Notes (Optional)",multiline:!0,rows:3,value:t.notes,onChange:H("notes"),disabled:C,placeholder:"Additional information about the customer..."})}),(0,r.jsxs)(m.ZP,{item:!0,xs:12,children:[r.jsx(p.Z,{sx:{my:2}}),(0,r.jsxs)(n.Z,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[r.jsx(o.Z,{variant:"outlined",onClick:()=>{e.push("/customers")},disabled:C,startIcon:r.jsx(f.Z,{}),children:"Cancel"}),r.jsx(o.Z,{type:"submit",variant:"contained",disabled:C,startIcon:C?r.jsx(y.Z,{size:20}):r.jsx(g,{}),sx:{minWidth:140},children:C?"Creating...":"Create Customer"})]})]})]})})]})})]})}},51471:(e,t,s)=>{"use strict";s.d(t,{x:()=>i});let r=s(44099).Z.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="/login"),e.response?.status===403&&console.error("Permission denied"),e.response?.status>=500&&console.error("Server error:",e.response?.data?.message||e.message),Promise.reject(e)));class a{constructor(){this.instance=r}async get(e,t){try{let s=await this.instance.get(e,t);return{success:!0,data:s.data}}catch(e){return this.handleError(e)}}async post(e,t,s){try{let r=await this.instance.post(e,t,s);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}async put(e,t,s){try{let r=await this.instance.put(e,t,s);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}async patch(e,t,s){try{let r=await this.instance.patch(e,t,s);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}async delete(e,t){try{let s=await this.instance.delete(e,t);return{success:!0,data:s.data}}catch(e){return this.handleError(e)}}handleError(e){return e.response?{success:!1,error:e.response.data?.message||e.response.statusText}:e.request?{success:!1,error:"Network error - please check your internet connection"}:{success:!1,error:e.message||"An unexpected error occurred"}}async uploadFile(e,t,s){let r=new FormData;r.append("file",t);try{let t=await this.instance.post(e,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(s&&e.total){let t=Math.round(100*e.loaded/e.total);s(t)}}});return{success:!0,data:t.data}}catch(e){return this.handleError(e)}}async downloadFile(e,t){try{let s=await this.instance.get(e,{responseType:"blob"}),r=new Blob([s.data]),a=document.createElement("a");a.href=window.URL.createObjectURL(r),a.download=t,a.click(),window.URL.revokeObjectURL(a.href)}catch(e){throw console.error("File download failed:",e),e}}setAuthToken(e){this.instance.defaults.headers.Authorization=`Bearer ${e}`}clearAuthToken(){delete this.instance.defaults.headers.Authorization}}let i=new a},70427:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/customers/create/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[762,908,82,861,348,541,27,65],()=>s(83066));module.exports=r})();