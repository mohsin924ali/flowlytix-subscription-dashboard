(()=>{var e={};e.id=374,e.ids=[374],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},65827:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(93250),s(32039),s(35866);var r=s(23191),n=s(88716),a=s(37922),i=s.n(a),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,93250)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/customers/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32039)),"/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/customers/page.tsx"],u="/customers/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/customers/page",pathname:"/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},83900:(e,t,s)=>{Promise.resolve().then(s.bind(s,12105))},10727:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(51426),n=s(10326);let a=(0,r.Z)((0,n.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business")},67840:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(51426),n=s(10326);let a=(0,r.Z)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},36249:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(51426),n=s(10326);let a=(0,r.Z)((0,n.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},31277:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(51426),n=s(10326);let a=(0,r.Z)((0,n.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},66042:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(51426),n=s(10326);let a=(0,r.Z)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},57329:(e,t,s)=>{"use strict";s.d(t,{Z:()=>w});var r,n=s(91367),a=s(45353),i=s(17577),o=s(41135),l=s(88634),c=s(54641),d=s(30274),u=s(45011),h=s(65656),p=s(91703),x=s(71685),m=s(97898);function Z(e){return(0,m.ZP)("MuiInputAdornment",e)}let j=(0,x.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var v=s(2791),g=s(10326);let y=["children","className","component","disablePointerEvents","disableTypography","position","variant"],b=e=>{let{classes:t,disablePointerEvents:s,hiddenLabel:r,position:n,size:a,variant:i}=e,o={root:["root",s&&"disablePointerEvents",n&&`position${(0,c.Z)(n)}`,i,r&&"hiddenLabel",a&&`size${(0,c.Z)(a)}`]};return(0,l.Z)(o,Z,t)},f=(0,p.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:s}=e;return[t.root,t[`position${(0,c.Z)(s.position)}`],!0===s.disablePointerEvents&&t.disablePointerEvents,t[s.variant]]}})(({theme:e,ownerState:t})=>(0,a.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${j.positionStart}&:not(.${j.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),w=i.forwardRef(function(e,t){let s=(0,v.i)({props:e,name:"MuiInputAdornment"}),{children:l,className:c,component:p="div",disablePointerEvents:x=!1,disableTypography:m=!1,position:Z,variant:j}=s,w=(0,n.Z)(s,y),P=(0,h.Z)()||{},z=j;j&&P.variant,P&&!z&&(z=P.variant);let C=(0,a.Z)({},s,{hiddenLabel:P.hiddenLabel,size:P.size,disablePointerEvents:x,position:Z,variant:z}),S=b(C);return(0,g.jsx)(u.Z.Provider,{value:null,children:(0,g.jsx)(f,(0,a.Z)({as:p,ownerState:C,className:(0,o.Z)(S.root,c),ref:t},w,{children:"string"!=typeof l||m?(0,g.jsxs)(i.Fragment,{children:["start"===Z?r||(r=(0,g.jsx)("span",{className:"notranslate",children:"â€‹"})):null,l]}):(0,g.jsx)(d.Z,{color:"text.secondary",children:l})}))})})},12105:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var r=s(10326),n=s(17577),a=s(35047),i=s(71728),o=s(98139),l=s(30274),c=s(42265),d=s(9861),u=s(34039),h=s(4766),p=s(90541),x=s(57329),m=s(98956),Z=s(60893),j=s(50219),v=s(23543),g=s(72163),y=s(36112),b=s(59777),f=s(33198),w=s(85560),P=s(48260),z=s(92528),C=s(15054),S=s(37841),E=s(78969),q=s(25886),_=s(10727),L=s(31277),A=s(3423),M=s(15114),I=s(36249);let k=(0,s(51426).Z)((0,r.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone");var R=s(88337),V=s(66042),H=s(67840),T=s(76383),U=s(90434);function $(){let e=(0,a.useRouter)(),[t,s]=(0,n.useState)([]),[$,D]=(0,n.useState)(!0),[O,F]=(0,n.useState)(null),[B,G]=(0,n.useState)(""),[N,W]=(0,n.useState)(0),[X,J]=(0,n.useState)(10),[K,Q]=(0,n.useState)(null),[Y,ee]=(0,n.useState)(null),et=(e,t)=>{Q(e.currentTarget),ee(t)},es=()=>{Q(null),ee(null)},er=t.filter(e=>e.name.toLowerCase().includes(B.toLowerCase())||e.email.toLowerCase().includes(B.toLowerCase())||e.company&&e.company.toLowerCase().includes(B.toLowerCase())),en=er.slice(N*X,N*X+X),ea=e=>{switch(e){case"business":return"primary";case"individual":return"secondary";default:return"default"}},ei=e=>"business"===e?r.jsx(_.Z,{}):r.jsx(L.Z,{});return $?r.jsx(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:r.jsx(o.Z,{size:48})}):(0,r.jsxs)(i.Z,{sx:{px:2,py:1},children:[(0,r.jsxs)(i.Z,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(i.Z,{children:[r.jsx(l.Z,{variant:"h4",component:"h1",sx:{fontWeight:700,color:"#1e293b"},children:"Customers"}),r.jsx(l.Z,{variant:"body1",color:"textSecondary",children:"Manage your customer database and subscriptions"})]}),r.jsx(U.default,{href:"/customers/create",style:{textDecoration:"none"},children:r.jsx(c.Z,{variant:"contained",startIcon:r.jsx(A.Z,{}),size:"large",sx:{borderRadius:2},children:"Add Customer"})})]}),O&&r.jsx(d.Z,{severity:"error",sx:{mb:3},children:O}),r.jsx(u.Z,{sx:{mb:3},children:r.jsx(h.Z,{children:r.jsx(p.Z,{fullWidth:!0,placeholder:"Search customers by name, email, or company...",value:B,onChange:e=>{G(e.target.value),W(0)},InputProps:{startAdornment:r.jsx(x.Z,{position:"start",children:r.jsx(M.Z,{color:"action"})})}})})}),(0,r.jsxs)(u.Z,{children:[r.jsx(m.Z,{component:Z.Z,children:(0,r.jsxs)(j.Z,{children:[r.jsx(v.Z,{children:(0,r.jsxs)(g.Z,{children:[r.jsx(y.Z,{children:"Customer"}),r.jsx(y.Z,{children:"Type"}),r.jsx(y.Z,{children:"Contact"}),r.jsx(y.Z,{children:"Company"}),r.jsx(y.Z,{children:"Created"}),r.jsx(y.Z,{align:"right",children:"Actions"})]})}),r.jsx(b.Z,{children:en.map(e=>(0,r.jsxs)(g.Z,{hover:!0,children:[r.jsx(y.Z,{children:(0,r.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(f.Z,{sx:{bgcolor:"primary.main"},children:e.name.charAt(0).toUpperCase()}),(0,r.jsxs)(i.Z,{children:[r.jsx(l.Z,{variant:"subtitle2",fontWeight:600,children:e.name}),r.jsx(l.Z,{variant:"body2",color:"textSecondary",children:e.email})]})]})}),r.jsx(y.Z,{children:r.jsx(w.Z,{icon:ei(e.metadata?.customer_type),label:e.metadata?.customer_type||"individual",color:ea(e.metadata?.customer_type),size:"small",sx:{textTransform:"capitalize"}})}),r.jsx(y.Z,{children:(0,r.jsxs)(i.Z,{children:[(0,r.jsxs)(l.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[r.jsx(I.Z,{fontSize:"small",color:"action"}),e.email]}),e.phone&&(0,r.jsxs)(l.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:.5},children:[r.jsx(k,{fontSize:"small",color:"action"}),e.phone]})]})}),r.jsx(y.Z,{children:r.jsx(l.Z,{variant:"body2",children:e.company||"-"})}),r.jsx(y.Z,{children:r.jsx(l.Z,{variant:"body2",children:new Date(e.created_at).toLocaleDateString()})}),r.jsx(y.Z,{align:"right",children:r.jsx(P.Z,{onClick:t=>et(t,e),size:"small",children:r.jsx(R.Z,{})})})]},e.id))})]})}),r.jsx(z.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:er.length,rowsPerPage:X,page:N,onPageChange:(e,t)=>{W(t)},onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),W(0)}})]}),(0,r.jsxs)(C.Z,{anchorEl:K,open:!!K,onClose:es,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,r.jsxs)(S.Z,{onClick:()=>{Y&&e.push(`/customers/${Y.id}`),es()},children:[r.jsx(E.Z,{children:r.jsx(V.Z,{fontSize:"small"})}),r.jsx(q.Z,{children:"View Details"})]}),(0,r.jsxs)(S.Z,{onClick:()=>{Y&&e.push(`/customers/${Y.id}/edit`),es()},children:[r.jsx(E.Z,{children:r.jsx(H.Z,{fontSize:"small"})}),r.jsx(q.Z,{children:"Edit Customer"})]}),(0,r.jsxs)(S.Z,{onClick:()=>{Y&&e.push(`/subscriptions/create?customerId=${Y.id}`),es()},children:[r.jsx(E.Z,{children:r.jsx(T.Z,{fontSize:"small"})}),r.jsx(q.Z,{children:"Create Subscription"})]})]})]})}s(51471)},51471:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});let r=s(44099).Z.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),window.location.href="/login"),e.response?.status===403&&console.error("Permission denied"),e.response?.status>=500&&console.error("Server error:",e.response?.data?.message||e.message),Promise.reject(e)));class n{constructor(){this.instance=r}async get(e,t){try{let s=await this.instance.get(e,t);return{success:!0,data:s.data}}catch(e){return this.handleError(e)}}async post(e,t,s){try{let r=await this.instance.post(e,t,s);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}async put(e,t,s){try{let r=await this.instance.put(e,t,s);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}async patch(e,t,s){try{let r=await this.instance.patch(e,t,s);return{success:!0,data:r.data}}catch(e){return this.handleError(e)}}async delete(e,t){try{let s=await this.instance.delete(e,t);return{success:!0,data:s.data}}catch(e){return this.handleError(e)}}handleError(e){return e.response?{success:!1,error:e.response.data?.message||e.response.statusText}:e.request?{success:!1,error:"Network error - please check your internet connection"}:{success:!1,error:e.message||"An unexpected error occurred"}}async uploadFile(e,t,s){let r=new FormData;r.append("file",t);try{let t=await this.instance.post(e,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(s&&e.total){let t=Math.round(100*e.loaded/e.total);s(t)}}});return{success:!0,data:t.data}}catch(e){return this.handleError(e)}}async downloadFile(e,t){try{let s=await this.instance.get(e,{responseType:"blob"}),r=new Blob([s.data]),n=document.createElement("a");n.href=window.URL.createObjectURL(r),n.download=t,n.click(),window.URL.revokeObjectURL(n.href)}catch(e){throw console.error("File download failed:",e),e}}setAuthToken(e){this.instance.defaults.headers.Authorization=`Bearer ${e}`}clearAuthToken(){delete this.instance.defaults.headers.Authorization}}let a=new n},93250:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/mohsinali/Documents/flowlytix-subscription-dashboard/src/app/customers/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[762,908,82,861,348,541,754,719,65],()=>s(65827));module.exports=r})();